// Adjust the throttle to eliminate complexity errors.  Lower = slower and less complex
static int throttle = 400;
static string lcdName = "SpaceGameboy LCD";

// Opus 5 rom
byte[] rom=Convert.FromBase64String("9SoSEwUg+vHJPiDgAPAA8AAv5g/LN0c+EOAA8ADwAPAA8ADwAPAAL+YPsEf6psEvoOqnwXjqpsE+MOAAyf///8NhAP//////2f/////////Z/////////9n/////////2fP1PsDgRj4oPSD9IQD+zYYA+qPAPOqjwM0hBPqiwDzqosDx+9nlIabAKv4AKFz+ASAFKuBDGPL+AiAFKuBCGOn+AyAZxdUqVypfKkcqTyrlb2EqEhMFIPrh0cEYzP4EICbF1SpXKl8qRypPKuVvYX4SfcYQMAEkb3vGIDABFF8FIO3h0cEYosOKAD4A6qbA6qXA4cn//////////////wDDUAHO7WZmzA0ACwNzAIMADAANAAgRH4iJAA7czG7m3d3Zmbu7Z2NuDuzM3dyZn7u5Mz5PcHVzIFRlc3QgICAgICAgAAAAAAAAAAABnxurMfT/PgHg/5fgQeBAPhDgQ+rJwerMwT4I4ELqy8HqzcE+AOrIwerKweqgwAEAQM3kAc0cAs1RAs3MAT4A6qbAPlTqAcA+VOoAwD4C6gLAPgDqA8A+0+BAPgDqo8D7+qPA/gAo+eqkwJfqo8DNCQDNUwTNWgI+AOqgwMOtASEAwAagPv8iBSD8IajBBhA+/yIjBSD5ySEAgBYQHkDwQeYCIPoKIgMVwusBFhAdwusBydUWEB4Q8EHmAiD6CiIDHSD0HhDVFgAZ0RUg6tHJPgDNYQVETSEAmM3/AT4BzWEFRE0hEJjN/wE+As1hBURNIQCazf8BPgPNYQVETSEQms3/Ack+k+BH4EjgScn1+qbBy3fKnwL6psHLZ8p4Aj4B6gLAPgDqA8DDlwL6psHLb8qNAj4B6gLAPiDqA8DDlwI+AOoCwD4A6gPADgTN+QfD4AL6psHLf8rgAvqmwctnyrwCPgHqAsA+QOoDwMPbAvqmwctvytECPgHqAsA+YOoDwMPbAj4A6gLAPkDqA8AOBM0zB/qmwctvygID+qbB5sDC+gI+AuoCwD4g6gPADgTNWwvDJAP6psHLZ8okA/qmwebAwhwDPgLqAsA+AOoDwA4EzYgKwyQD+qfBy0coA83qA/qnwctPKAj6ocDuAeqhwPHJ+gLA/gEoUP4AICb6A8DmQMJhA/oBwMYCR/oAwNYDTz4AyfoBwMYCR/oAwMYITz4EyfoDwOYgwocD+gHAxghH+gDAxgJPPgLJ+gHA1gNH+gDAxgJPPgbJ+gPA5iDCxAP6A8DmQMK1A/oBwMYHR/oAwNYCTz4ByfoBwMYHR/oAwMYHTz4DyfoDwOZAwtsD+gHA1gJH+gDA1gJPPgfJ+gHA1gJH+gDAxgdPPgXJ9cXVIajBFhB+/v8oCSMjFSD20cHxyc0/AyI2PD4QkiEEwMsnyydfFgAZcSNwIzYFIzYA0cHxyfXF5SGowQYQKv7/KB01IBrlxSs+/3c+EJBfyyPLIxYAIQTAGT4AInfB4SMFINrhwfHJ9cUhqMEGEH7+/8oABeU+EJBfyyPLIxYAIQTAGVRd4X7+ACAL5WJrftYDd+HDAAV+/gEgD+Via37WAiJ+xgJ34cMABX7+AiAM5WJrI37GAnfhwwAFfv4DIA/lYmt+xgIifsYCd+HDAAV+/gQgCuVia37GA3fhGDZ+/gUgD+Via37GAiJ+1gJ34cMABX7+BiAM5WJrI37WA3fhwwAFfv4HIAzlYmt+1gIiftYCd+EjIwXCWgTB8cn6ycGBMAzqycH6yME86sjBGAPqycHJ+snBkTAM6snB+sjBPerIwRgD6snByfrLwYEwDOrLwfrKwTzqysEYA+rLwcn6y8GRMAzqy8H6ysE96srBGAPqy8HJxSEAREcOAAnByRYAyyPLEssjyxLLI8sSyyPLEssjyxIhAJgZWBYAGXzq0MF96tHByeV+IQBEHgBXGfrVwcsnyyfLJ8sn6tjBX/rUwYNfFgAZ+tTBRz4QkEfq2sFUXeXFIabA+qXATwYACcYG6qXAwT4D8yL60MEi+tHBIngieiJ7IjYA++H62cGQ6tnB4cnlfiEARB4AVxn62MFfFgAZ5frQwWf60cFv+trBXxYAGX3mHyAHfdYgMAElb3zq0MF96tHB0frZwf4RMAhHPgDq2cEYDAYQ1hDq2cE+EOraweXFIabA+qXATwYACcYG6qXAwT4D8yL60MEi+tHBIngieiJ7IjYA++HhyfrIwWf6ycFvyzzLHcs8yx3LPMsdfdYCMAElb3z+ADgXIAV9/kA4EHzGAGd9xkAwBm98PGcYAW995g/q1MHLPcscyz3LHMs9yxzLPcscferWwUf60sFn+tPBb8s8yx3LPMsdyzzLHcs8yx1dFgDLI8sSyyPLEnuAMAEUXyEATBk+GOrZwc2SBfrWwTzq1sH+BDgO1gTq1sF91gMwASVvGAEjzfAF+tnB/gAoHfrWwTzq1sH+BDgO1gTq1sF91gMwASVvGAEjzfAFycXV5c01BfrKwf4EOBkgB/rLwf4AOBD6ysHWBOrKwfrLwdYA6svB+s/Bgf4I2sgH+szByz/LP8s/1gL+IDgCxiBH+s3Byz/LP8s/xhT+IDgC1iBfzWsF+srBZ/rLwW/LPMsdyzzLHcs8yx19xhMwASRvfP4AOA8gBX3+gDgIfNYAZ33WgG986tLBferTweYP6tXBzWoG+s3BgerNwUflxSGmwPqlwE8GAAnGAuqlwME+AvMieCI2APvh+s/BgeYH6s/B4dHBycXV5c1LBfrKwf4EOCcgB/rLwf4AOB76ysHGBOrKwfrLwcYAMAzqy8H6ysE86srBGAPqy8H6z8GR/gjapAj6zMHLP8s/yz/WAv4gOALGIEf6zcHLP8s/yz/WA/4gOALGIF/NawX6ysFn+svBb8s8yx3LPMsdyzzLHX3WAjABJW98/gA4FyAFff6AOBB8xgBnfcaAMAZvfDxnGAFvfOrSwX3q08HmD+rVwc1qBvrNwZHqzcFH5cUhpsD6pcBPBgAJxgLqpcDBPgLzIngiNgD74frPwZHmB+rPweHRwcnJ5X4hAEQeAFcZ+tXByyfLJ8snyydf+tTB6tjBg18WABn61cFHPhCQR+rawVRd5cUhpsD6pcBPBgAJxgbqpcDBPgTzIvrQwSL60cEieCJ6InsiNgD74frZwZDq2cHhyeV+IQBEHgBXGfrYwV8WABnl+tDBZ/rRwW/62sEWAF/LI8sSyyPLEssjyxLLI8sSyyPLEhl8/pw4BiaYfeYfb3zq0MF96tHB0frZwf4RMAhHPgDq2cEYDAYQ1hDq2cE+EOraweXFIabA+qXATwYACcYG6qXAwT4E8yL60MEi+tHBIngieiJ7IjYA++HhyfrKwWf6y8FvyzzLHcs8yx3LPMsdfdYCMAElb3z+ADgXIAV9/oA4EHzGAGd9xoAwBm98PGcYAW986tLBferTweYP6tXByzzLHcs8yx3LPMsdyzzLHX3q18FfFgDLI8sSyyPLEvrWwYMwARRfIQBMGT4W6tnBzdYI+tfBPOrXwf4IOBHWCOrXwSEATPrWwV8WABkYBR4EFgAZzTQJ+tnB/gAoJPrXwTzq18H+CDgR1gjq18EhAEz61sFfFgAZGAUeBBYAGc00CcnF1eXNCQX6yMH+AjgZIAf6ycH+ADgQ+sjB1gLqyMH6ycHWAOrJwfrOwYH+CNoqC/rNwcs/yz/LP9YC/iA4AsYgX/rMwcs/yz/LP8YW/iA4AtYgR81rBfrIwWf6ycFvyzzLHcs8yx3LPMsdfcYVMAEkb3z+ADgPIAV9/kA4CHzWAGd91kBvfeYP6tTByzzLHcs8yx3LPMsdyzzLHX3q1sHNwQn6zMGB6szBR+XFIabA+qXATwYACcYC6qXAwT4B8yJ4IjYA++H6zsGB5gfqzsHh0cHJxdXlzR8F+sjB/gI4JyAH+snB/gA4HvrIwcYC6sjB+snBxgAwDOrJwfrIwTzqyMEYA+rJwfrOwZH+CNoTDPrNwcs/yz/LP9YC/iA4AsYgX/rMwcs/yz/LP9YD/iA4AsYgR81rBfrIwWf6ycFvyzzLHcs8yx3LPMsdfdYCMAElb3z+ADgXIAV9/kA4EHzGAGd9xkAwBm98PGcYAW995g/q1MHLPcscyz3LHMs9yxzLPcscferWwc3BCfrMwZHqzMFH5cUhpsD6pcBPBgAJxgLqpcDBPgHzIngiNgD74frOwZHmB+rOweHRwcnl1SpHfk/6yMFX+snBX3iCR3mTMAZPeDxHGAFPeP7/KA7+ACAXef6RMBLGCEcYCHn++TgIxghHPgDR4ck+AdHhycn//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////xAAEAA4EDiSOIJ8ggCSAIIBEAYgPkQcgBwBBAIABAAIAPggADwAfww8ACAAAPgAAAAAAAAgIAAAAAAAAAQEAAAAAAAAAAAQEAAAAAAAAAAAQACgQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAIABAAIABAAIABAAIAAgABAACAAEAAIAAQAAgABAP8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP8AwwBCAAAAAAAAAAAAAAAAAAAAOABEAEQARABEAEQAOAAAABAAMAAQABAAEAAQADgAAAA4AEQABAAYACAAQAB8AAAAOABEAAQAGAAEAEQAOAAAAAgAGAAoAEgAfAAIAAgAAAB8AEAAQAA4AAQABAB4AAAAOABAAEAAeABEAEQAOAAAAHwABAAIAAgAEAAQACAAAAA4AEQARAA4AEQARAA4AAAAOABEAEQAPAAEAAQAOAAAABAAKABEAEQAfABEAEQAAAB4AEQARAB4AEQARAB4AAAAOABEAEAAQABAAEQAOAAAAHgARABEAEQARABEAHgAAAB8AEAAQABwAEAAQAB8AAAAfABAAEAAcABAAEAAQAAHAB8HOx9/Pz8fPx9vP38/wADgwPDguPD8+Pz42PD48P9/93+/f/5/bz8/Hx8DAwD8+P783/7++Njw8ODggIAABwAOBx8PNx99P/9/73//f+AA+OC8+Pb8/vz//vf+/f5/P30/bz8/Hx0PDwcHAAAA7/7+/Pb83Pj48PDg8ODgAAAAAQAHAQ8HOw9/P+9//39wAPhwvPj+/Pb8f/7//vf+33//f3s/Px83Hx8PDgcHAP789vz8+Hjw2PDw4OCAgAAcAH4c7nz7ft9+9jw+DA4AGAA+GG8++36+fPZ8fDg4ADgAfDj2fN9+/X5vPj4YGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGBgYGBgYGBgYGBgYGBgYGBgQGBgQGBgQGAwYGBgQEBgYGBgMGBgYGBgYGJCUGBgYGBgQGBgYGBgYGBiYnBgYGBgQGBgYGBgQGBAYGBgYEBgYGBgQcHQYGBgYGBgYEBgYGBgYGHh8GBgYDBAQGBgYGBgYGBgYGBgQGBgYGBikGBgYEBgQGBgYGBgYGBgYGBgYGBgYGBgYEBgQGBgYGBAQGBgYGBgQGBgYGBiAhBgYGBgYGKAYGBgYGBgYiIwYGBgYGBgYGBgMGBgYGBgYGBgQGBgQGBgYGBgYqBgYEBgYGBgYGBgYGBAYGBgYGBgYEBgYGBgQGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYEBgYEBgYoBgYEBgYEBgYGBgYGBgYGBgYGBgQGBgYGBgYEJCUGBgQDBgYGBigGBgYGBiYnBAYGBgYGBgQGBgYGBAYGBgYGBgYpBgYGAwYGBgYEBgYGHB0GBgYEBgYEBgYGBgYEBh4fBgYGBgYGBgYGKgYEBgYGBgYEBgYGKgYGBgYGAwYGBAMGBgYGBgYDBgYGBgYGBgYGBgYGBAYGBgYGBikGICEGBgQGKAYDBgQGBgQGBiIjBgYEBgYEBgYGBgYGBgYGBgYGBgYGBgYGBgYEBgMGBAYGBgQGAwYEBiQlBgYGBgYGKQYGBgYGBgYmJwYEBgYGBgYGBgYGBAYGAwYGBgYGBAYGKQYEBgYGBgQGBAYGICEGBgYGBgYgIQYGBgYEBiIjBgQGBAYGIiMGBgYGBgYGBgYGAwYGBgYEBgYEBgQGBgQEBgYEBgQEBgYGBgYEAwYGBiQlBgYGBgYGKgYEBgYGBgYmJwYGBgYDBgYEBgYGBgQGBgYGBgQGBgYGBgYGKAYGBgYGBigGBgYEBAYGBgYGBgQGBgQGBgQGBgYGBAYGAwYGBgMGBgYEBgYGBgYGBAYGBAYGBgYGBgQGKQYGBgQGBgYEBgYcHQYGBgYGBgQGBioGBgQGHh8GBgMGBgYGBgYGBgYGBgYGBgYGBgYGBgQGBgQGBgYGBAYGBgQGBgQGBgQGBAYpBgYEBgQGBgQGAwQGBgYGBgYGAwYGBgQGBgQGHB0DBAYEBgYkJQYGBAQGBh4fBgYGBgYEJicGBgYGBAYGBgYEBgYEBgYGAwYEBgYGAwYGBAMGBgYEBgYGBgQDBgYEBgYEBioGBgYGBAQGBAYGBgYEBgQGBgQGBgYGBgYGICEGBgYGBgYGBAQGBgQGBiIjBgYEBgQDBgYGBgYGBgYEBgYDBgYEBiQlBAYEBgYGBgYEBgQGBAYmJwYGBgYoBgYEBgYGBgYGBgYDBgYGAwYEBgYEBgMGBAYEBgYGBgYGBgYGBgYGBgYGBgYGBgYDBgYGBgYGBgYGBgYpBgYEBgQEBgQGBgMGBAYGBgYDBAQEAwQEBgYGBgYGBgYGBgYEBAYgIQQEBgYcHQYGBgYEBAYEIiMoBAYoHh8GBAYGBgQoBgMGBAQEBgYEBgYGBAYEBgQGKAYpBgQGBgYEBgYGKgQGKgYpBgMGBAQGBgYGBgYpBAYEAwQGBAMEBgYGBgYDBgYgIQYEBAQGBigGBgYEBgYGIiMEBgQDBAQGBAYGBgYGBAYGBAQEBgYDBAQGBgQGBgYGBgYpBiQlBgYDBAQGBgQGBigGBgYmJwQEKQYGHB0GBAYGBgYGBgYEBAYEBh4fBgYEBgYEBgYGBgQEBgYGBgYGBgYGBgMGBgYGBgYGJCUGBgYEBgYGBAYGBgYGBiYnBgMGBgYGBgYGKQQGBgYGBgQGBgYcHQYGBAYGBAYGBAYGBgYGHh8GBgYGBgYGBgYGBgYEBgYGBikGBgYEBgYGKAMGBgYGBgYGBAYEBgYGBgYGBgYGBgMEBgYDBAYDAwYGBgYqBgYGBgYGBgYGBgYGBAYDBgYEBgYGKAYGBgYEBgYGBgYGBgYGBgYGBAYpBgYGBgYEBgYgIQYDBgYGBgYGBAYoBgMGIiMGBgQGBgYGBAYGBgYGBgYGAwYGBgYGAwYEBgYGBgQDBgYGKgYEBgYGBgYGBAYGBgYGBgYGBgYGBgYGBgYGBAYGBiAhBgMGBAYDBgQGBgYGBgYiIwYGBgYGBgYGBgQGBAMGBgYEBgYGBgQGBAYGBgYGBgMGBgYGBAQGBiQlBgYEBgYGBgYDBgYGBgYmJwYEBgYcHQYGBgYGBgQGBgYGBgYGHh8EBgMGAwQGBgMEBgYoBgYGBgYGBgYGBgMDBgYGBgYEBgYDBgYGBgQEAwQEBgYGBgYGBgYGBgQGBgYGBAYGAwYDBgYGBgYGBAQGBgYGBAYGBgYGAwYEBgYEBgYcHQYGBgQqBgYGBgQGBgYGHh8GBAYGBgYGBgQGBgMEBgYGAwYGAwYGBAYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYEBgYEBgQGBgQGBAYoBigDBioGBgMGBgYGBgMGBAYGBgQGBgYGBgQGBgMGBgYoBioGBgYGBAYGBiQlBioGBAYqBgQGBAYGBgYmJwYDAwYGBgYGBgMGBAYGBhwdBAYgIQYDBgYGBgYEBgYeHwYGIiMEBgYGBAYEBgYoBgYqBgQGBgYGBgYGAwYGBAYGBgYGBgYGBgQGBgYGKQYGBAYGICEGBAYGBgYpBgYGKAYGBiIjBgYEBgMGBgYqBgYGBAYGBgYGBgYGBiQlBgYGBgYGAwYGAwYGKgYmJwQGBgYEBgQGBgQGBgYEBgYGBAYGBgYGBgYGBgABAgMCAwQFBAUGBwYHBwYHBgUEBQQDAgMCAQABAAAB//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8=");

int stage = 0;
SpaceGameboy gb;
Stack<string> taps = new Stack<string>();
public void Main(string argument)
{
    switch(stage)
    {
        case 0:
            var lcd = GridTerminalSystem.GetBlockWithName(lcdName) as IMyTextPanel;
            if(lcd != null)
            {
                gb = new SpaceGameboy(lcd,Echo);
            }
            else
            {
                throw new Exception(lcdName + " not found!");
            }
            break;
        case 1:
        case 2:
        case 3:
        case 4:
        case 5:
        case 6:
            gb.reset(rom, stage);
            break;
        default:
            while(taps.Count > 0){var tap=taps.Pop();gb.keyup(tap);}
            switch(argument)
            {
                case "upOn":case "downOn":case "rightOn":case "leftOn":case "aOn":case "bOn":case "startOn":case "selectOn":
                    gb.keydown(argument.Remove(argument.Length - 2));
                    break;
                case "upOff":case "downOff":case "rightOff":case "leftOff":case "aOff":case "bOff":case "startOff":case "selectOff":
                    gb.keyup(argument.Remove(argument.Length - 3));
                    break;
                case "up":case "down":case "right":case "left":case "a":case "b":case "start":case "select":
                    gb.keydown(argument);
                    taps.Push(argument); 
                    break;
            }
            gb.frame(throttle, stage);
            break;
    }
    stage++;
}

class T{public int y,x,tile,palette,yflip,xflip,prio,num;public T(int num){this.num=num;y=-16;x=-8;tile=0;palette=0;yflip=0;xflip=0;prio=0;num=0;}}class U{public byte[]bg=new byte[4];public byte[]obj0=new byte[4];public byte[]obj1=new byte[4];}class V{public char[]data=new char[161*144];public byte[]_vram=new byte[8192];public byte[]_oam=new byte[160];byte[]g=new byte[256];byte[][][]o=new byte[512][][];T[]p=new T[40];U q=new U();byte[]s=new byte[160];byte u=0;int z=0;int A=0;int B=0;byte C=0;byte D=0;byte E=0;int F=0;int G=0;int H=0;int I=0;int J=0;int K=0;int L=0x0000;int M=0x1800;int N=0x1800;long O=0;char[]P=new char[256];IMyTextPanel Q;a3 R;Y S;public V(IMyTextPanel screen){this.Q=screen;for(int n=0;n<256;n++){if(n==0){P[n]='\uE00F';}else if(n==96){P[n]='\uE00E';}else if(n==192){P[n]='\uE00D';}else if(n==255){P[n]='\uE006';}}}public void update(){long currentTime=DateTime.Now.Ticks/TimeSpan.TicksPerMillisecond;if(currentTime-O>50){Q.ShowTextureOnScreen();Q.ShowPublicTextOnScreen();Q.WritePublicText(new String(data),false);O=currentTime;}}public void reset(a3 z80,Y mMU){this.R=z80;this.S=mMU;Array.Clear(_vram,0x00,_vram.Length);Array.Clear(_oam,0x00,_oam.Length);for(int i=0;i<4;i++){q.bg[i]=0xFF;q.obj0[i]=0xFF;q.obj1[i]=0xFF;}for(int i=0;i<512;i++){o[i]=new byte[8][];for(int j=0;j<8;j++){o[i][j]=new byte[9];for(int k=0;k<8;k++){o[i][j][k]=0x00;}}}}public void reset2(){for(int i=0;i<data.Length/2;i++)data[i]=P[0xFF];}public void reset3(){for(int i=data.Length/2;i<data.Length;i++)data[i]=P[0xFF];}public void reset4(){for(int n=160;n<data.Length;n+=161)data[n]="\n"[0];update();u=0;z=0;A=2;B=0;C=0;D=0;E=0;F=0;G=0;H=0;I=0;J=0;K=0;for(int i=0;i<160;i++)s[i]=0;for(int i=0;i<40;i++){p[i]=new T(i);}L=0x0000;M=0x1800;N=0x1800;}public void checkline(){B+=R.r.m;if(A==0){if(B>=51){if(u==143){A=1;update();S._if|=1;}else{A=2;}u++;z+=161;B=0;}}else if(A==1){if(B>=114){B=0;u++;if(u>153){u=0;z=0;A=2;}}}else if(A==2){if(B>=20){B=0;A=3;}}else if(A==3){if(B>=43){B=0;A=0;if(G>0){if(H>0){int linebase=z;int mapbase=M+((((u+C)&255)>>3)<<5);int y=(u+C)&7;int x=D&7;int t=(D>>3)&31;int w=160;if(L>0){int tile=_vram[mapbase+t];if(tile<128)tile=(256+tile);var tilerow=o[tile][y];for(int i=0;i<99999;i++){s[159-x]=tilerow[x];data[linebase]=P[q.bg[tilerow[x]]];x++;if(x==8){t=(t+1)&31;x=0;tile=_vram[mapbase+t];if(tile<128){tile=(256+tile);}tilerow=o[tile][y];}linebase++;if(!(--w>0))break;}}else{var tilerow=o[_vram[mapbase+t]][y];for(int i=0;i<99999;i++){s[159-x]=tilerow[x];data[linebase]=P[q.bg[tilerow[x]]];x++;if(x==8){t=(t+1)&31;x=0;tilerow=o[_vram[mapbase+t]][y];}linebase++;if(!(--w>0))break;}}}if(I>0){var cnt=0;if(K>0){}else{byte[]tilerow;T obj;byte[]pal;int x=0;int linebase=z;for(var i=0;i<40;i++){obj=p[i];if(obj.y<=u&&(obj.y+8)>u){if(obj.yflip>0)tilerow=o[obj.tile][7-(u-obj.y)];else tilerow=o[obj.tile][u-obj.y];if(obj.palette>0)pal=q.obj1;else pal=q.obj0;linebase=(u*161+obj.x);if(obj.xflip>0){for(x=0;x<8;x++){if(obj.x+x>=0&&obj.x+x<160){if(tilerow[7-x]>0&&(obj.prio>0||!(s[x]>0))){data[linebase]=P[pal[tilerow[7-x]]];}}linebase++;}}else{for(x=0;x<8;x++){if(obj.x+x>=0&&obj.x+x<160){if(tilerow[x]>0&&(obj.prio>0||!(s[x]>0))){data[linebase]=P[pal[tilerow[x]]];}}linebase++;}}cnt++;if(cnt>10)break;}}}}}}}}public void updatetile(int addr,byte val){var saddr=addr;if((addr&1)>0){saddr--;addr--;}var tile=(addr>>4)&511;var y=(addr>>1)&7;int sx;for(var x=0;x<8;x++){sx=1<<(7-x);o[tile][y][x]=(byte)((((_vram[saddr]&sx)>0)?0x01:0x00)|(((_vram[saddr+1]&sx)>0)?0x02:0x00));}}public void updateoam(int addr,byte val){addr-=0xFE00;var obj=addr>>2;if(obj<40){switch(addr&3){case 0:p[obj].y=val-16;break;case 1:p[obj].x=val-8;break;case 2:if(K>0)p[obj].tile=(val&0xFE);else p[obj].tile=val;break;case 3:p[obj].palette=((val&0x10)>0)?1:0;p[obj].xflip=((val&0x20)>0)?1:0;p[obj].yflip=((val&0x40)>0)?1:0;p[obj].prio=((val&0x80)>0)?1:0;break;}}}public byte rb(int addr){var gaddr=addr-0xFF40;switch(gaddr){case 0:return(byte)(((G>0)?0x80:0)|((L==0x0000)?0x10:0)|((M==0x1C00)?0x08:0)|((K>0)?0x04:0)|((I>0)?0x02:0)|((H>0)?0x01:0));case 1:return(byte)((u==E?4:0)|A);case 2:return C;case 3:return D;case 4:return u;case 5:return E;default:return g[gaddr];}}public void wb(int addr,byte val){var gaddr=addr-0xFF40;g[gaddr]=val;switch(gaddr){case 0:G=((val&0x80)>0)?1:0;L=((val&0x10)>0)?0x0000:0x0800;M=((val&0x08)>0)?0x1C00:0x1800;K=((val&0x04)>0)?1:0;I=((val&0x02)>0)?1:0;H=((val&0x01)>0)?1:0;break;case 2:C=val;break;case 3:D=val;break;case 5:E=val;break;case 6:for(var i=0;i<160;i++){byte v=S.rb((val<<8)+i);_oam[i]=v;updateoam(0xFE00+i,v);}break;case 7:for(var i=0;i<4;i++){switch((val>>(i*2))&3){case 0:q.bg[i]=255;break;case 1:q.bg[i]=192;break;case 2:q.bg[i]=96;break;case 3:q.bg[i]=0;break;}}break;case 8:for(var i=0;i<4;i++){switch((val>>(i*2))&3){case 0:q.obj0[i]=255;break;case 1:q.obj0[i]=192;break;case 2:q.obj0[i]=96;break;case 3:q.obj0[i]=0;break;}}break;case 9:for(var i=0;i<4;i++){switch((val>>(i*2))&3){case 0:q.obj1[i]=255;break;case 1:q.obj1[i]=192;break;case 2:q.obj1[i]=96;break;case 3:q.obj1[i]=0;break;}}break;}}}class W{byte[]g=new byte[2]{0x0F,0x0F};int o=0;public void reset(){g=new byte[2]{0x0F,0x0F};o=0;}public byte rb(){switch(o){case 0x00:return 0x00;case 0x10:return g[0];case 0x20:return g[1];default:return 0x00;}}public void wb(int v){o=v&0x30;}public void keydown(string key){switch(key){case "right":g[1]&=0xE;break;case "left":g[1]&=0xD;break;case "up":g[1]&=0xB;break;case "down":g[1]&=0x7;break;case "a":g[0]&=0xE;break;case "b":g[0]&=0xD;break;case "select":g[0]&=0xB;break;case "start":g[0]&=0x7;break;}}public void keyup(string key){switch(key){case "right":g[1]|=0x1;break;case "left":g[1]|=0x2;break;case "up":g[1]|=0x4;break;case "down":g[1]|=0x8;break;case "a":g[0]|=0x1;break;case "b":g[0]|=0x2;break;case "select":g[0]|=0x5;break;case "start":g[0]|=0x8;break;}}}class X{public int rombank=0,rambank=0,ramon=0,mode=0;}class Y{public byte[]_bios=Convert.FromBase64String("Mf7/ryH/nzLLfCD7ISb/DhE+gDLiDD7z4jI+d3c+/OBHEQQBIRCAGs2VAM2WABN7/jQg8xHYAAYIGhMiIwUg+T4Z6hCZIS+ZDgw9KAgyDSD5Lg8Y82c+ZFfgQj6R4EAEHgIODPBE/pAg+g0g9x0g8g4TJHweg/5iKAYewf5kIAZ74gw+h/LwQpDgQhUg0gUgTxYgGMtPBgTFyxEXwcsRFwUg9SIjIiPJzu1mZswNAAsDcwCDAAwADQAIER+IiQAO3Mxu5t3d2Zm7u2djbg7szN3cmZ+7uTM+PEK5pbmlQkwhBAERqAAaE74g/iN9/jQg9QYZeIYjBSD7hiD+PgHgUA==");byte[]g;int o=0;X p=new X();X q=new X();int s=0x4000;int u=0;byte[]z=new byte[8192];byte[]A=new byte[32768];byte[]B=new byte[127];public byte _inbios=1;public byte _ie=0;public byte _if=0;V C;_ D;W E;a3 F;public void reset(V gPU,_ tIMER,W kEY,a3 z80){this.C=gPU;this.D=tIMER;this.E=kEY;this.F=z80;int i;for(i=0;i<8192;i++)z[i]=0;for(i=0;i<32768;i++)A[i]=0;for(i=0;i<127;i++)B[i]=0;_inbios=1;_ie=0;_if=0;o=0;p=new X();q=new X();s=0x4000;u=0;}public void load(byte[]rom){g=rom;o=g[0x0147];}public byte rb(int addr){int v=addr&0xF000;if(v==0x0000){if(_inbios>0){if(addr<0x0100)return _bios[addr];else if(F.r.pc==0x0100){_inbios=0;}}else{return g[addr];}return g[addr];}else if(v<=0x3000){return g[addr];}else if(v<=0x7000){return g[s+(addr&0x3FFF)];}else if(v<=0x9000){return C._vram[addr&0x1FFF];}else if(v<=0xB000){return A[u+(addr&0x1FFF)];}else if(v<=0xE000){return z[addr&0x1FFF];}else if(v<=0xF000){int w=addr&0x0F00;if(w<=0xD00){return z[addr&0x1FFF];}else if(w<=0xE00){return(byte)(((addr&0xFF)<0xA0)?C._oam[addr&0xFF]:0x00);}else if(w<=0xF00){if(addr==0xFFFF){return _ie;}else if(addr>0xFF7F){return B[addr&0x7F];}else switch(addr&0xF0){case 0x00:switch(addr&0xF){case 0:return E.rb();case 4:case 5:case 6:case 7:return D.rb(addr);case 15:return _if;default:return 0x00;}case 0x10:case 0x20:case 0x30:return 0x00;case 0x40:case 0x50:case 0x60:case 0x70:return C.rb(addr);}}}return 0x00;}public int rw(int addr){return rb(addr)+(rb(addr+1)<<8);}public void wb(int addr,byte val){int v=addr&0xF000;if(v==0x0000||v==0x1000){switch(o){case 1:q.ramon=((val&0xF)==0xA)?1:0;break;}}else if(v==0x2000||v==0x3000){switch(o){case 1:q.rombank&=0x60;val&=0x1F;if(!(val>0))val=1;q.rombank|=val;s=q.rombank*0x4000;break;}}else if(v==0x4000||v==0x5000){switch(o){case 1:if(q.mode>0){q.rambank=(val&3);u=q.rambank*0x2000;}else{q.rombank&=0x1F;q.rombank|=((val&3)<<5);s=q.rombank*0x4000;}break;}}else if(v==0x6000||v==0x7000){switch(o){case 1:q.mode=val&1;break;}}else if(v==0x8000||v==0x9000){C._vram[addr&0x1FFF]=val;C.updatetile(addr&0x1FFF,val);}else if(v==0xA000||v==0xB000){A[u+(addr&0x1FFF)]=val;}else if(v==0xC000||v==0xD000||v==0xE000){z[addr&0x1FFF]=val;}else if(v==0xF000){var w=addr&0x0F00;if(w<=0xD00){z[addr&0x1FFF]=val;}else if(w==0xE00){if((addr&0xFF)<0xA0)C._oam[addr&0xFF]=val;C.updateoam(addr,val);}else if(w==0xF00){if(addr==0xFFFF){_ie=val;}else if(addr>0xFF7F){B[addr&0x7F]=val;}else switch(addr&0xF0){case 0x00:switch(addr&0xF){case 0:E.wb(val);break;case 4:case 5:case 6:case 7:D.wb(addr,val);break;case 15:_if=val;break;}break;case 0x10:case 0x20:case 0x30:break;case 0x40:case 0x50:case 0x60:case 0x70:C.wb(addr,val);break;}}}}public void ww(int addr,int val){wb(addr,(byte)(val&0xFF));wb(addr+1,(byte)(val>>8));}}public class SpaceGameboy{private V g;private Y o;private a3 p;private W q;private _ s;static public Action<string>Echo;public SpaceGameboy(IMyTextPanel screen,Action<string>Echo){SpaceGameboy.Echo=Echo;this.g=new V(screen);this.o=new Y();this.p=new a3();this.q=new W();this.s=new _();}public void frame(int throttle,int stage){var fclock=p._clock.m+17556;do{throttle--;p._map[o.rb(p.r.pc++)]();p.r.pc&=65535;if(p.r.ime>0&&o._ie>0&&o._if>0){p._halt=0;p.r.ime=0;var ifired=o._ie&o._if;if((ifired&1)>0){o._if&=0xFE;p.RST40();}else if((ifired&2)>0){o._if&=0xFD;p.RST48();}else if((ifired&4)>0){o._if&=0xFB;p.RST50();}else if((ifired&8)>0){o._if&=0xF7;p.RST58();}else if((ifired&16)>0){o._if&=0xEF;p.RST60();}else{p.r.ime=1;}}p._clock.m+=p.r.m;g.checkline();s.inc();}while(p._clock.m<fclock&&throttle>0);}public void reset(byte[]rom,int stage){switch(stage){case 1:g.reset(this.p,this.o);break;case 2:g.reset2();break;case 3:g.reset3();break;case 4:g.reset4();break;case 5:o.reset(g,s,q,p);p.reset(o);q.reset();s.reset(o,p);p.r.pc=0x100;o._inbios=0;p.r.sp=0xFFFE;p.r.c=0x13;p.r.e=0xD8;p.r.a=1;break;case 6:o.load(rom);this.run();break;}}public void run(){p._stop=0;}public void keydown(string key){q.keydown(key);}public void keyup(string key){q.keyup(key);}}class Z{public int main=0,sub=0,div=0;}class _{private byte g=0;private byte o=0;private byte p=0;private byte q=0;private Z s=new Z();Y u;a3 z;public void reset(Y mMU,a3 z80){this.u=mMU;this.z=z80;g=0;o=0;p=0;q=0;s.main=0;s.sub=0;s.div=0;}public void step(){p++;s.main=0;if(p>255){p=o;u._if|=4;}}public void inc(){var oldclk=s.main;s.sub+=z.r.m;if(s.sub>3){s.main++;s.sub-=4;s.div++;if(s.div==16){s.div=0;g++;g&=255;}}if((q&4)>0){switch(q&3){case 0:if(s.main>=64)step();break;case 1:if(s.main>=1)step();break;case 2:if(s.main>=4)step();break;case 3:if(s.main>=16)step();break;}}}public byte rb(int addr){switch(addr){case 0xFF04:return g;case 0xFF05:return p;case 0xFF06:return o;case 0xFF07:return q;}return 0x00;}public void wb(int addr,byte val){switch(addr){case 0xFF04:g=0x00;break;case 0xFF05:p=val;break;case 0xFF06:o=val;break;case 0xFF07:q=(byte)(val&7);break;}}}class a0{public int a=0,b=0,c=0,d=0,e=0,h=0,l=0,f=0,sp=0,pc=0,i=0,r=0,m=0,ime=0;}class a1{public int a=0,b=0,c=0,d=0,e=0,h=0,l=0,f=0;}class a2{public int m=0;}class a3{public a0 r=new a0();public a1 rv=new a1();public a2 _clock=new a2();public int _halt=0;public int _stop=0;Y g;public a3(){this._map=new Action[256]{NOP,LDBCnn,LDBCmA,INCBC,INCr_b,DECr_b,LDrn_b,RLCA,LDmmSP,ADDHLBC,LDABCm,DECBC,INCr_c,DECr_c,LDrn_c,RRCA,DJNZn,LDDEnn,LDDEmA,INCDE,INCr_d,DECr_d,LDrn_d,RLA,JRn,ADDHLDE,LDADEm,DECDE,INCr_e,DECr_e,LDrn_e,RRA,JRNZn,LDHLnn,LDHLIA,INCHL,INCr_h,DECr_h,LDrn_h,DAA,JRZn,ADDHLHL,LDAHLI,DECHL,INCr_l,DECr_l,LDrn_l,CPL,JRNCn,LDSPnn,LDHLDA,INCSP,INCHLm,DECHLm,LDHLmn,SCF,JRCn,ADDHLSP,LDAHLD,DECSP,INCr_a,DECr_a,LDrn_a,CCF,LDrr_bb,LDrr_bc,LDrr_bd,LDrr_be,LDrr_bh,LDrr_bl,LDrHLm_b,LDrr_ba,LDrr_cb,LDrr_cc,LDrr_cd,LDrr_ce,LDrr_ch,LDrr_cl,LDrHLm_c,LDrr_ca,LDrr_db,LDrr_dc,LDrr_dd,LDrr_de,LDrr_dh,LDrr_dl,LDrHLm_d,LDrr_da,LDrr_eb,LDrr_ec,LDrr_ed,LDrr_ee,LDrr_eh,LDrr_el,LDrHLm_e,LDrr_ea,LDrr_hb,LDrr_hc,LDrr_hd,LDrr_he,LDrr_hh,LDrr_hl,LDrHLm_h,LDrr_ha,LDrr_lb,LDrr_lc,LDrr_ld,LDrr_le,LDrr_lh,LDrr_ll,LDrHLm_l,LDrr_la,LDHLmr_b,LDHLmr_c,LDHLmr_d,LDHLmr_e,LDHLmr_h,LDHLmr_l,HALT,LDHLmr_a,LDrr_ab,LDrr_ac,LDrr_ad,LDrr_ae,LDrr_ah,LDrr_al,LDrHLm_a,LDrr_aa,ADDr_b,ADDr_c,ADDr_d,ADDr_e,ADDr_h,ADDr_l,ADDHL,ADDr_a,ADCr_b,ADCr_c,ADCr_d,ADCr_e,ADCr_h,ADCr_l,ADCHL,ADCr_a,SUBr_b,SUBr_c,SUBr_d,SUBr_e,SUBr_h,SUBr_l,SUBHL,SUBr_a,SBCr_b,SBCr_c,SBCr_d,SBCr_e,SBCr_h,SBCr_l,SBCHL,SBCr_a,ANDr_b,ANDr_c,ANDr_d,ANDr_e,ANDr_h,ANDr_l,ANDHL,ANDr_a,XORr_b,XORr_c,XORr_d,XORr_e,XORr_h,XORr_l,XORHL,XORr_a,ORr_b,ORr_c,ORr_d,ORr_e,ORr_h,ORr_l,ORHL,ORr_a,CPr_b,CPr_c,CPr_d,CPr_e,CPr_h,CPr_l,CPHL,CPr_a,RETNZ,POPBC,JPNZnn,JPnn,CALLNZnn,PUSHBC,ADDn,RST00,RETZ,RET,JPZnn,MAPcb,CALLZnn,CALLnn,ADCn,RST08,RETNC,POPDE,JPNCnn,XX,CALLNCnn,PUSHDE,SUBn,RST10,RETC,RETI,JPCnn,XX,CALLCnn,XX,SBCn,RST18,LDIOnA,POPHL,LDIOCA,XX,XX,PUSHHL,ANDn,RST20,ADDSPn,JPHL,LDmmA,XX,XX,XX,XORn,RST28,LDAIOn,POPAF,LDAIOC,DI,XX,PUSHAF,ORn,RST30,LDHLSPn,XX,LDAmm,EI,XX,XX,CPn,RST38};this._cbmap=new Action[256]{RLCr_b,RLCr_c,RLCr_d,RLCr_e,RLCr_h,RLCr_l,RLCHL,RLCr_a,RRCr_b,RRCr_c,RRCr_d,RRCr_e,RRCr_h,RRCr_l,RRCHL,RRCr_a,RLr_b,RLr_c,RLr_d,RLr_e,RLr_h,RLr_l,RLHL,RLr_a,RRr_b,RRr_c,RRr_d,RRr_e,RRr_h,RRr_l,RRHL,RRr_a,SLAr_b,SLAr_c,SLAr_d,SLAr_e,SLAr_h,SLAr_l,XX,SLAr_a,SRAr_b,SRAr_c,SRAr_d,SRAr_e,SRAr_h,SRAr_l,XX,SRAr_a,SWAPr_b,SWAPr_c,SWAPr_d,SWAPr_e,SWAPr_h,SWAPr_l,XX,SWAPr_a,SRLr_b,SRLr_c,SRLr_d,SRLr_e,SRLr_h,SRLr_l,XX,SRLr_a,BIT0b,BIT0c,BIT0d,BIT0e,BIT0h,BIT0l,BIT0m,BIT0a,BIT1b,BIT1c,BIT1d,BIT1e,BIT1h,BIT1l,BIT1m,BIT1a,BIT2b,BIT2c,BIT2d,BIT2e,BIT2h,BIT2l,BIT2m,BIT2a,BIT3b,BIT3c,BIT3d,BIT3e,BIT3h,BIT3l,BIT3m,BIT3a,BIT4b,BIT4c,BIT4d,BIT4e,BIT4h,BIT4l,BIT4m,BIT4a,BIT5b,BIT5c,BIT5d,BIT5e,BIT5h,BIT5l,BIT5m,BIT5a,BIT6b,BIT6c,BIT6d,BIT6e,BIT6h,BIT6l,BIT6m,BIT6a,BIT7b,BIT7c,BIT7d,BIT7e,BIT7h,BIT7l,BIT7m,BIT7a,RES0b,RES0c,RES0d,RES0e,RES0h,RES0l,RES0m,RES0a,RES1b,RES1c,RES1d,RES1e,RES1h,RES1l,RES1m,RES1a,RES2b,RES2c,RES2d,RES2e,RES2h,RES2l,RES2m,RES2a,RES3b,RES3c,RES3d,RES3e,RES3h,RES3l,RES3m,RES3a,RES4b,RES4c,RES4d,RES4e,RES4h,RES4l,RES4m,RES4a,RES5b,RES5c,RES5d,RES5e,RES5h,RES5l,RES5m,RES5a,RES6b,RES6c,RES6d,RES6e,RES6h,RES6l,RES6m,RES6a,RES7b,RES7c,RES7d,RES7e,RES7h,RES7l,RES7m,RES7a,SET0b,SET0c,SET0d,SET0e,SET0h,SET0l,SET0m,SET0a,SET1b,SET1c,SET1d,SET1e,SET1h,SET1l,SET1m,SET1a,SET2b,SET2c,SET2d,SET2e,SET2h,SET2l,SET2m,SET2a,SET3b,SET3c,SET3d,SET3e,SET3h,SET3l,SET3m,SET3a,SET4b,SET4c,SET4d,SET4e,SET4h,SET4l,SET4m,SET4a,SET5b,SET5c,SET5d,SET5e,SET5h,SET5l,SET5m,SET5a,SET6b,SET6c,SET6d,SET6e,SET6h,SET6l,SET6m,SET6a,SET7b,SET7c,SET7d,SET7e,SET7h,SET7l,SET7m,SET7a,};}public void reset(Y mMU){this.g=mMU;this.r.a=0;this.r.b=0;this.r.c=0;this.r.d=0;this.r.e=0;this.r.h=0;this.r.l=0;this.r.f=0;this.r.sp=0;this.r.pc=0;this.r.i=0;this.r.r=0;this.r.m=0;this._halt=0;this._stop=0;this._clock.m=0;this.r.ime=1;}public void exec(){this.r.r=(this.r.r+1)&127;this._map[g.rb(this.r.pc++)]();this.r.pc&=65535;this._clock.m+=this.r.m;}public Action[]_map;public Action[]_cbmap;public void LDrr_bb(){r.b=r.b;r.m=1;}public void LDrr_bc(){r.b=r.c;r.m=1;}public void LDrr_bd(){r.b=r.d;r.m=1;}public void LDrr_be(){r.b=r.e;r.m=1;}public void LDrr_bh(){r.b=r.h;r.m=1;}public void LDrr_bl(){r.b=r.l;r.m=1;}public void LDrr_ba(){r.b=r.a;r.m=1;}public void LDrr_cb(){r.c=r.b;r.m=1;}public void LDrr_cc(){r.c=r.c;r.m=1;}public void LDrr_cd(){r.c=r.d;r.m=1;}public void LDrr_ce(){r.c=r.e;r.m=1;}public void LDrr_ch(){r.c=r.h;r.m=1;}public void LDrr_cl(){r.c=r.l;r.m=1;}public void LDrr_ca(){r.c=r.a;r.m=1;}public void LDrr_db(){r.d=r.b;r.m=1;}public void LDrr_dc(){r.d=r.c;r.m=1;}public void LDrr_dd(){r.d=r.d;r.m=1;}public void LDrr_de(){r.d=r.e;r.m=1;}public void LDrr_dh(){r.d=r.h;r.m=1;}public void LDrr_dl(){r.d=r.l;r.m=1;}public void LDrr_da(){r.d=r.a;r.m=1;}public void LDrr_eb(){r.e=r.b;r.m=1;}public void LDrr_ec(){r.e=r.c;r.m=1;}public void LDrr_ed(){r.e=r.d;r.m=1;}public void LDrr_ee(){r.e=r.e;r.m=1;}public void LDrr_eh(){r.e=r.h;r.m=1;}public void LDrr_el(){r.e=r.l;r.m=1;}public void LDrr_ea(){r.e=r.a;r.m=1;}public void LDrr_hb(){r.h=r.b;r.m=1;}public void LDrr_hc(){r.h=r.c;r.m=1;}public void LDrr_hd(){r.h=r.d;r.m=1;}public void LDrr_he(){r.h=r.e;r.m=1;}public void LDrr_hh(){r.h=r.h;r.m=1;}public void LDrr_hl(){r.h=r.l;r.m=1;}public void LDrr_ha(){r.h=r.a;r.m=1;}public void LDrr_lb(){r.l=r.b;r.m=1;}public void LDrr_lc(){r.l=r.c;r.m=1;}public void LDrr_ld(){r.l=r.d;r.m=1;}public void LDrr_le(){r.l=r.e;r.m=1;}public void LDrr_lh(){r.l=r.h;r.m=1;}public void LDrr_ll(){r.l=r.l;r.m=1;}public void LDrr_la(){r.l=r.a;r.m=1;}public void LDrr_ab(){r.a=r.b;r.m=1;}public void LDrr_ac(){r.a=r.c;r.m=1;}public void LDrr_ad(){r.a=r.d;r.m=1;}public void LDrr_ae(){r.a=r.e;r.m=1;}public void LDrr_ah(){r.a=r.h;r.m=1;}public void LDrr_al(){r.a=r.l;r.m=1;}public void LDrr_aa(){r.a=r.a;r.m=1;}public void LDrHLm_b(){r.b=g.rb((r.h<<8)+r.l);r.m=2;}public void LDrHLm_c(){r.c=g.rb((r.h<<8)+r.l);r.m=2;}public void LDrHLm_d(){r.d=g.rb((r.h<<8)+r.l);r.m=2;}public void LDrHLm_e(){r.e=g.rb((r.h<<8)+r.l);r.m=2;}public void LDrHLm_h(){r.h=g.rb((r.h<<8)+r.l);r.m=2;}public void LDrHLm_l(){r.l=g.rb((r.h<<8)+r.l);r.m=2;}public void LDrHLm_a(){r.a=g.rb((r.h<<8)+r.l);r.m=2;}public void LDHLmr_b(){g.wb((r.h<<8)+r.l,(byte)r.b);r.m=2;}public void LDHLmr_c(){g.wb((r.h<<8)+r.l,(byte)r.c);r.m=2;}public void LDHLmr_d(){g.wb((r.h<<8)+r.l,(byte)r.d);r.m=2;}public void LDHLmr_e(){g.wb((r.h<<8)+r.l,(byte)r.e);r.m=2;}public void LDHLmr_h(){g.wb((r.h<<8)+r.l,(byte)r.h);r.m=2;}public void LDHLmr_l(){g.wb((r.h<<8)+r.l,(byte)r.l);r.m=2;}public void LDHLmr_a(){g.wb((r.h<<8)+r.l,(byte)r.a);r.m=2;}public void LDrn_b(){r.b=g.rb(r.pc);r.pc++;r.m=2;}public void LDrn_c(){r.c=g.rb(r.pc);r.pc++;r.m=2;}public void LDrn_d(){r.d=g.rb(r.pc);r.pc++;r.m=2;}public void LDrn_e(){r.e=g.rb(r.pc);r.pc++;r.m=2;}public void LDrn_h(){r.h=g.rb(r.pc);r.pc++;r.m=2;}public void LDrn_l(){r.l=g.rb(r.pc);r.pc++;r.m=2;}public void LDrn_a(){r.a=g.rb(r.pc);r.pc++;r.m=2;}public void LDHLmn(){g.wb((r.h<<8)+r.l,(byte)g.rb(r.pc));r.pc++;r.m=3;}public void LDBCmA(){g.wb((r.b<<8)+r.c,(byte)r.a);r.m=2;}public void LDDEmA(){g.wb((r.d<<8)+r.e,(byte)r.a);r.m=2;}public void LDmmA(){g.wb(g.rw(r.pc),(byte)r.a);r.pc+=2;r.m=4;}public void LDmmSP(){}public void LDABCm(){r.a=g.rb((r.b<<8)+r.c);r.m=2;}public void LDADEm(){r.a=g.rb((r.d<<8)+r.e);r.m=2;}public void LDAmm(){r.a=g.rb(g.rw(r.pc));r.pc+=2;r.m=4;}public void LDBCnn(){r.c=g.rb(r.pc);r.b=g.rb(r.pc+1);r.pc+=2;r.m=3;}public void LDDEnn(){r.e=g.rb(r.pc);r.d=g.rb(r.pc+1);r.pc+=2;r.m=3;}public void LDHLnn(){r.l=g.rb(r.pc);r.h=g.rb(r.pc+1);r.pc+=2;r.m=3;}public void LDSPnn(){r.sp=g.rw(r.pc);r.pc+=2;r.m=3;}public void LDHLmm(){int i=g.rw(r.pc);r.pc+=2;r.l=g.rb(i);r.h=g.rb(i+1);r.m=5;}public void LDmmHL(){int i=g.rw(r.pc);r.pc+=2;g.ww(i,(r.h<<8)+r.l);r.m=5;}public void LDHLIA(){g.wb((r.h<<8)+r.l,(byte)r.a);r.l=(r.l+1)&0xFF;if(!(r.l>0))r.h=(r.h+1)&0xFF;r.m=2;}public void LDAHLI(){r.a=g.rb((r.h<<8)+r.l);r.l=(r.l+1)&0xFF;if(!(r.l>0))r.h=(r.h+1)&0xFF;r.m=2;}public void LDHLDA(){g.wb((r.h<<8)+r.l,(byte)r.a);r.l=(r.l-1)&0xFF;if(r.l==0xFF)r.h=(r.h-1)&0xFF;r.m=2;}public void LDAHLD(){r.a=g.rb((r.h<<8)+r.l);r.l=(r.l-1)&0xFF;if(r.l==0xFF)r.h=(r.h-1)&0xFF;r.m=2;}public void LDAIOn(){r.a=g.rb(0xFF00+g.rb(r.pc));r.pc++;r.m=3;}public void LDIOnA(){g.wb(0xFF00+g.rb(r.pc),(byte)r.a);r.pc++;r.m=3;}public void LDAIOC(){r.a=g.rb(0xFF00+r.c);r.m=2;}public void LDIOCA(){g.wb(0xFF00+r.c,(byte)r.a);r.m=2;}public void LDHLSPn(){int i=g.rb(r.pc);if(i>127)i=-((~i+1)&0xFF);r.pc++;i+=r.sp;r.h=(i>>8)&0xFF;r.l=i&0xFF;r.m=3;}public void SWAPr_b(){var tr=r.b;r.b=((tr&0xF)<<4)|((tr&0xF0)>>4);r.f=(r.b>0)?0:0x80;r.m=1;}public void SWAPr_c(){var tr=r.c;r.c=((tr&0xF)<<4)|((tr&0xF0)>>4);r.f=(r.c>0)?0:0x80;r.m=1;}public void SWAPr_d(){var tr=r.d;r.d=((tr&0xF)<<4)|((tr&0xF0)>>4);r.f=(r.d>0)?0:0x80;r.m=1;}public void SWAPr_e(){var tr=r.e;r.e=((tr&0xF)<<4)|((tr&0xF0)>>4);r.f=(r.e>0)?0:0x80;r.m=1;}public void SWAPr_h(){var tr=r.h;r.h=((tr&0xF)<<4)|((tr&0xF0)>>4);r.f=(r.h>0)?0:0x80;r.m=1;}public void SWAPr_l(){var tr=r.l;r.l=((tr&0xF)<<4)|((tr&0xF0)>>4);r.f=(r.l>0)?0:0x80;r.m=1;}public void SWAPr_a(){var tr=r.a;r.a=((tr&0xF)<<4)|((tr&0xF0)>>4);r.f=(r.a>0)?0:0x80;r.m=1;}public void ADDr_b(){var a=r.a;r.a+=r.b;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.b^a)&0x10)>0)r.f|=0x20;r.m=1;}public void ADDr_c(){var a=r.a;r.a+=r.c;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.c^a)&0x10)>0)r.f|=0x20;r.m=1;}public void ADDr_d(){var a=r.a;r.a+=r.d;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.d^a)&0x10)>0)r.f|=0x20;r.m=1;}public void ADDr_e(){var a=r.a;r.a+=r.e;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.e^a)&0x10)>0)r.f|=0x20;r.m=1;}public void ADDr_h(){var a=r.a;r.a+=r.h;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.h^a)&0x10)>0)r.f|=0x20;r.m=1;}public void ADDr_l(){var a=r.a;r.a+=r.l;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.l^a)&0x10)>0)r.f|=0x20;r.m=1;}public void ADDr_a(){var a=r.a;r.a+=r.a;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.a^a)&0x10)>0)r.f|=0x20;r.m=1;}public void ADDHL(){var a=r.a;var m=g.rb((r.h<<8)+r.l);r.a+=m;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^a^m)&0x10)>0)r.f|=0x20;r.m=2;}public void ADDn(){var a=r.a;var m=g.rb(r.pc);r.a+=m;r.pc++;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^a^m)&0x10)>0)r.f|=0x20;r.m=2;}public void ADDHLBC(){var hl=(r.h<<8)+r.l;hl+=(r.b<<8)+r.c;if(hl>65535)r.f|=0x10;else r.f&=0xEF;r.h=(hl>>8)&0xFF;r.l=hl&0xFF;r.m=3;}public void ADDHLDE(){var hl=(r.h<<8)+r.l;hl+=(r.d<<8)+r.e;if(hl>65535)r.f|=0x10;else r.f&=0xEF;r.h=(hl>>8)&0xFF;r.l=hl&0xFF;r.m=3;}public void ADDHLHL(){var hl=(r.h<<8)+r.l;hl+=(r.h<<8)+r.l;if(hl>65535)r.f|=0x10;else r.f&=0xEF;r.h=(hl>>8)&0xFF;r.l=hl&0xFF;r.m=3;}public void ADDHLSP(){var hl=(r.h<<8)+r.l;hl+=r.sp;if(hl>65535)r.f|=0x10;else r.f&=0xEF;r.h=(hl>>8)&0xFF;r.l=hl&0xFF;r.m=3;}public void ADDSPn(){int i=g.rb(r.pc);if(i>127)i=-((~i+1)&0xFF);r.pc++;r.sp+=i;r.m=4;}public void ADCr_b(){var a=r.a;r.a+=r.b;r.a+=((r.f&0x10)>0)?1:0;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.b^a)&0x10)>0)r.f|=0x20;r.m=1;}public void ADCr_c(){var a=r.a;r.a+=r.c;r.a+=((r.f&0x10)>0)?1:0;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.c^a)&0x10)>0)r.f|=0x20;r.m=1;}public void ADCr_d(){var a=r.a;r.a+=r.d;r.a+=((r.f&0x10)>0)?1:0;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.d^a)&0x10)>0)r.f|=0x20;r.m=1;}public void ADCr_e(){var a=r.a;r.a+=r.e;r.a+=((r.f&0x10)>0)?1:0;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.e^a)&0x10)>0)r.f|=0x20;r.m=1;}public void ADCr_h(){var a=r.a;r.a+=r.h;r.a+=((r.f&0x10)>0)?1:0;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.h^a)&0x10)>0)r.f|=0x20;r.m=1;}public void ADCr_l(){var a=r.a;r.a+=r.l;r.a+=((r.f&0x10)>0)?1:0;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.l^a)&0x10)>0)r.f|=0x20;r.m=1;}public void ADCr_a(){var a=r.a;r.a+=r.a;r.a+=((r.f&0x10)>0)?1:0;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.a^a)&0x10)>0)r.f|=0x20;r.m=1;}public void ADCHL(){var a=r.a;var m=g.rb((r.h<<8)+r.l);r.a+=m;r.a+=((r.f&0x10)>0)?1:0;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^m^a)&0x10)>0)r.f|=0x20;r.m=2;}public void ADCn(){var a=r.a;var m=g.rb(r.pc);r.a+=m;r.pc++;r.a+=((r.f&0x10)>0)?1:0;r.f=(r.a>0xFF)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^m^a)&0x10)>0)r.f|=0x20;r.m=2;}public void SUBr_b(){var a=r.a;r.a-=r.b;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.b^a)&0x10)>0)r.f|=0x20;r.m=1;}public void SUBr_c(){var a=r.a;r.a-=r.c;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.c^a)&0x10)>0)r.f|=0x20;r.m=1;}public void SUBr_d(){var a=r.a;r.a-=r.d;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.d^a)&0x10)>0)r.f|=0x20;r.m=1;}public void SUBr_e(){var a=r.a;r.a-=r.e;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.e^a)&0x10)>0)r.f|=0x20;r.m=1;}public void SUBr_h(){var a=r.a;r.a-=r.h;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.h^a)&0x10)>0)r.f|=0x20;r.m=1;}public void SUBr_l(){var a=r.a;r.a-=r.l;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.l^a)&0x10)>0)r.f|=0x20;r.m=1;}public void SUBr_a(){var a=r.a;r.a-=r.a;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.a^a)&0x10)>0)r.f|=0x20;r.m=1;}public void SUBHL(){var a=r.a;var m=g.rb((r.h<<8)+r.l);r.a-=m;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^m^a)&0x10)>0)r.f|=0x20;r.m=2;}public void SUBn(){var a=r.a;var m=g.rb(r.pc);r.a-=m;r.pc++;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^m^a)&0x10)>0)r.f|=0x20;r.m=2;}public void SBCr_b(){var a=r.a;r.a-=r.b;r.a-=((r.f&0x10)>0)?1:0;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.b^a)&0x10)>0)r.f|=0x20;r.m=1;}public void SBCr_c(){var a=r.a;r.a-=r.c;r.a-=((r.f&0x10)>0)?1:0;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.c^a)&0x10)>0)r.f|=0x20;r.m=1;}public void SBCr_d(){var a=r.a;r.a-=r.d;r.a-=((r.f&0x10)>0)?1:0;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.d^a)&0x10)>0)r.f|=0x20;r.m=1;}public void SBCr_e(){var a=r.a;r.a-=r.e;r.a-=((r.f&0x10)>0)?1:0;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.e^a)&0x10)>0)r.f|=0x20;r.m=1;}public void SBCr_h(){var a=r.a;r.a-=r.h;r.a-=((r.f&0x10)>0)?1:0;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.h^a)&0x10)>0)r.f|=0x20;r.m=1;}public void SBCr_l(){var a=r.a;r.a-=r.l;r.a-=((r.f&0x10)>0)?1:0;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.l^a)&0x10)>0)r.f|=0x20;r.m=1;}public void SBCr_a(){var a=r.a;r.a-=r.a;r.a-=((r.f&0x10)>0)?1:0;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^r.a^a)&0x10)>0)r.f|=0x20;r.m=1;}public void SBCHL(){var a=r.a;var m=g.rb((r.h<<8)+r.l);r.a-=m;r.a-=((r.f&0x10)>0)?1:0;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^m^a)&0x10)>0)r.f|=0x20;r.m=2;}public void SBCn(){var a=r.a;var m=g.rb(r.pc);r.a-=m;r.pc++;r.a-=((r.f&0x10)>0)?1:0;r.f=(r.a<0)?0x50:0x40;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;if(((r.a^m^a)&0x10)>0)r.f|=0x20;r.m=2;}public void CPr_b(){int i=r.a;i-=r.b;r.f=(i<0)?0x50:0x40;i&=0xFF;if(!(i>0))r.f|=0x80;if(((r.a^r.b^i)&0x10)>0)r.f|=0x20;r.m=1;}public void CPr_c(){int i=r.a;i-=r.c;r.f=(i<0)?0x50:0x40;i&=0xFF;if(!(i>0))r.f|=0x80;if(((r.a^r.c^i)&0x10)>0)r.f|=0x20;r.m=1;}public void CPr_d(){int i=r.a;i-=r.d;r.f=(i<0)?0x50:0x40;i&=0xFF;if(!(i>0))r.f|=0x80;if(((r.a^r.d^i)&0x10)>0)r.f|=0x20;r.m=1;}public void CPr_e(){int i=r.a;i-=r.e;r.f=(i<0)?0x50:0x40;i&=0xFF;if(!(i>0))r.f|=0x80;if(((r.a^r.e^i)&0x10)>0)r.f|=0x20;r.m=1;}public void CPr_h(){int i=r.a;i-=r.h;r.f=(i<0)?0x50:0x40;i&=0xFF;if(!(i>0))r.f|=0x80;if(((r.a^r.h^i)&0x10)>0)r.f|=0x20;r.m=1;}public void CPr_l(){int i=r.a;i-=r.l;r.f=(i<0)?0x50:0x40;i&=0xFF;if(!(i>0))r.f|=0x80;if(((r.a^r.l^i)&0x10)>0)r.f|=0x20;r.m=1;}public void CPr_a(){int i=r.a;i-=r.a;r.f=(i<0)?0x50:0x40;i&=0xFF;if(!(i>0))r.f|=0x80;if(((r.a^r.a^i)&0x10)>0)r.f|=0x20;r.m=1;}public void CPHL(){int i=r.a;var m=g.rb((r.h<<8)+r.l);i-=m;r.f=(i<0)?0x50:0x40;i&=0xFF;if(!(i>0))r.f|=0x80;if(((r.a^i^m)&0x10)>0)r.f|=0x20;r.m=2;}public void CPn(){int i=r.a;var m=g.rb(r.pc);i-=m;r.pc++;r.f=(i<0)?0x50:0x40;i&=0xFF;if(!(i>0))r.f|=0x80;if(((r.a^i^m)&0x10)>0)r.f|=0x20;r.m=2;}public void DAA(){var a=r.a;if((r.f&0x20)>0||((r.a&15)>9))r.a+=6;r.f&=0xEF;if(((r.f&0x20)>0)||(a>0x99)){r.a+=0x60;r.f|=0x10;}r.m=1;}public void ANDr_b(){r.a&=r.b;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void ANDr_c(){r.a&=r.c;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void ANDr_d(){r.a&=r.d;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void ANDr_e(){r.a&=r.e;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void ANDr_h(){r.a&=r.h;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void ANDr_l(){r.a&=r.l;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void ANDr_a(){r.a&=r.a;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void ANDHL(){r.a&=g.rb((r.h<<8)+r.l);r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=2;}public void ANDn(){r.a&=g.rb(r.pc);r.pc++;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=2;}public void ORr_b(){r.a|=r.b;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void ORr_c(){r.a|=r.c;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void ORr_d(){r.a|=r.d;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void ORr_e(){r.a|=r.e;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void ORr_h(){r.a|=r.h;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void ORr_l(){r.a|=r.l;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void ORr_a(){r.a|=r.a;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void ORHL(){r.a|=g.rb((r.h<<8)+r.l);r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=2;}public void ORn(){r.a|=g.rb(r.pc);r.pc++;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=2;}public void XORr_b(){r.a^=r.b;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void XORr_c(){r.a^=r.c;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void XORr_d(){r.a^=r.d;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void XORr_e(){r.a^=r.e;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void XORr_h(){r.a^=r.h;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void XORr_l(){r.a^=r.l;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void XORr_a(){r.a^=r.a;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void XORHL(){r.a^=g.rb((r.h<<8)+r.l);r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=2;}public void XORn(){r.a^=g.rb(r.pc);r.pc++;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=2;}public void INCr_b(){r.b++;r.b&=0xFF;r.f=(r.b>0)?0:0x80;r.m=1;}public void INCr_c(){r.c++;r.c&=0xFF;r.f=(r.c>0)?0:0x80;r.m=1;}public void INCr_d(){r.d++;r.d&=0xFF;r.f=(r.d>0)?0:0x80;r.m=1;}public void INCr_e(){r.e++;r.e&=0xFF;r.f=(r.e>0)?0:0x80;r.m=1;}public void INCr_h(){r.h++;r.h&=0xFF;r.f=(r.h>0)?0:0x80;r.m=1;}public void INCr_l(){r.l++;r.l&=0xFF;r.f=(r.l>0)?0:0x80;r.m=1;}public void INCr_a(){r.a++;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void INCHLm(){int i=g.rb((r.h<<8)+r.l)+1;i&=0xFF;g.wb((r.h<<8)+r.l,(byte)i);r.f=(i>0)?0:0x80;r.m=3;}public void DECr_b(){r.b--;r.b&=0xFF;r.f=(r.b>0)?0:0x80;r.m=1;}public void DECr_c(){r.c--;r.c&=0xFF;r.f=(r.c>0)?0:0x80;r.m=1;}public void DECr_d(){r.d--;r.d&=0xFF;r.f=(r.d>0)?0:0x80;r.m=1;}public void DECr_e(){r.e--;r.e&=0xFF;r.f=(r.e>0)?0:0x80;r.m=1;}public void DECr_h(){r.h--;r.h&=0xFF;r.f=(r.h>0)?0:0x80;r.m=1;}public void DECr_l(){r.l--;r.l&=0xFF;r.f=(r.l>0)?0:0x80;r.m=1;}public void DECr_a(){r.a--;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void DECHLm(){int i=g.rb((r.h<<8)+r.l)-1;i&=0xFF;g.wb((r.h<<8)+r.l,(byte)i);r.f=(i>0)?0:0x80;r.m=3;}public void INCBC(){r.c=(r.c+1)&0xFF;if(!(r.c>0))r.b=(r.b+1)&0xFF;r.m=1;}public void INCDE(){r.e=(r.e+1)&0xFF;if(!(r.e>0))r.d=(r.d+1)&0xFF;r.m=1;}public void INCHL(){r.l=(r.l+1)&0xFF;if(!(r.l>0))r.h=(r.h+1)&0xFF;r.m=1;}public void INCSP(){r.sp=(r.sp+1)&65535;r.m=1;}public void DECBC(){r.c=(r.c-1)&0xFF;if(r.c==0xFF)r.b=(r.b-1)&0xFF;r.m=1;}public void DECDE(){r.e=(r.e-1)&0xFF;if(r.e==0xFF)r.d=(r.d-1)&0xFF;r.m=1;}public void DECHL(){r.l=(r.l-1)&0xFF;if(r.l==0xFF)r.h=(r.h-1)&0xFF;r.m=1;}public void DECSP(){r.sp=(r.sp-1)&65535;r.m=1;}public void BIT0b(){r.f&=0x1F;r.f|=0x20;r.f=((r.b&0x01)>0)?0:0x80;r.m=2;}public void BIT0c(){r.f&=0x1F;r.f|=0x20;r.f=((r.c&0x01)>0)?0:0x80;r.m=2;}public void BIT0d(){r.f&=0x1F;r.f|=0x20;r.f=((r.d&0x01)>0)?0:0x80;r.m=2;}public void BIT0e(){r.f&=0x1F;r.f|=0x20;r.f=((r.e&0x01)>0)?0:0x80;r.m=2;}public void BIT0h(){r.f&=0x1F;r.f|=0x20;r.f=((r.h&0x01)>0)?0:0x80;r.m=2;}public void BIT0l(){r.f&=0x1F;r.f|=0x20;r.f=((r.l&0x01)>0)?0:0x80;r.m=2;}public void BIT0a(){r.f&=0x1F;r.f|=0x20;r.f=((r.a&0x01)>0)?0:0x80;r.m=2;}public void BIT0m(){r.f&=0x1F;r.f|=0x20;r.f=((g.rb((r.h<<8)+r.l)&0x01)>0)?0:0x80;r.m=3;}public void RES0b(){r.b&=0xFE;r.m=2;}public void RES0c(){r.c&=0xFE;r.m=2;}public void RES0d(){r.d&=0xFE;r.m=2;}public void RES0e(){r.e&=0xFE;r.m=2;}public void RES0h(){r.h&=0xFE;r.m=2;}public void RES0l(){r.l&=0xFE;r.m=2;}public void RES0a(){r.a&=0xFE;r.m=2;}public void RES0m(){int i=g.rb((r.h<<8)+r.l);i&=0xFE;g.wb((r.h<<8)+r.l,(byte)i);r.m=4;}public void SET0b(){r.b|=0x01;r.m=2;}public void SET0c(){r.b|=0x01;r.m=2;}public void SET0d(){r.b|=0x01;r.m=2;}public void SET0e(){r.b|=0x01;r.m=2;}public void SET0h(){r.b|=0x01;r.m=2;}public void SET0l(){r.b|=0x01;r.m=2;}public void SET0a(){r.b|=0x01;r.m=2;}public void SET0m(){int i=g.rb((r.h<<8)+r.l);i|=0x01;g.wb((r.h<<8)+r.l,(byte)i);r.m=4;}public void BIT1b(){r.f&=0x1F;r.f|=0x20;r.f=((r.b&0x02)>0)?0:0x80;r.m=2;}public void BIT1c(){r.f&=0x1F;r.f|=0x20;r.f=((r.c&0x02)>0)?0:0x80;r.m=2;}public void BIT1d(){r.f&=0x1F;r.f|=0x20;r.f=((r.d&0x02)>0)?0:0x80;r.m=2;}public void BIT1e(){r.f&=0x1F;r.f|=0x20;r.f=((r.e&0x02)>0)?0:0x80;r.m=2;}public void BIT1h(){r.f&=0x1F;r.f|=0x20;r.f=((r.h&0x02)>0)?0:0x80;r.m=2;}public void BIT1l(){r.f&=0x1F;r.f|=0x20;r.f=((r.l&0x02)>0)?0:0x80;r.m=2;}public void BIT1a(){r.f&=0x1F;r.f|=0x20;r.f=((r.a&0x02)>0)?0:0x80;r.m=2;}public void BIT1m(){r.f&=0x1F;r.f|=0x20;r.f=((g.rb((r.h<<8)+r.l)&0x02)>0)?0:0x80;r.m=3;}public void RES1b(){r.b&=0xFD;r.m=2;}public void RES1c(){r.c&=0xFD;r.m=2;}public void RES1d(){r.d&=0xFD;r.m=2;}public void RES1e(){r.e&=0xFD;r.m=2;}public void RES1h(){r.h&=0xFD;r.m=2;}public void RES1l(){r.l&=0xFD;r.m=2;}public void RES1a(){r.a&=0xFD;r.m=2;}public void RES1m(){int i=g.rb((r.h<<8)+r.l);i&=0xFD;g.wb((r.h<<8)+r.l,(byte)i);r.m=4;}public void SET1b(){r.b|=0x02;r.m=2;}public void SET1c(){r.b|=0x02;r.m=2;}public void SET1d(){r.b|=0x02;r.m=2;}public void SET1e(){r.b|=0x02;r.m=2;}public void SET1h(){r.b|=0x02;r.m=2;}public void SET1l(){r.b|=0x02;r.m=2;}public void SET1a(){r.b|=0x02;r.m=2;}public void SET1m(){int i=g.rb((r.h<<8)+r.l);i|=0x02;g.wb((r.h<<8)+r.l,(byte)i);r.m=4;}public void BIT2b(){r.f&=0x1F;r.f|=0x20;r.f=((r.b&0x04)>0)?0:0x80;r.m=2;}public void BIT2c(){r.f&=0x1F;r.f|=0x20;r.f=((r.c&0x04)>0)?0:0x80;r.m=2;}public void BIT2d(){r.f&=0x1F;r.f|=0x20;r.f=((r.d&0x04)>0)?0:0x80;r.m=2;}public void BIT2e(){r.f&=0x1F;r.f|=0x20;r.f=((r.e&0x04)>0)?0:0x80;r.m=2;}public void BIT2h(){r.f&=0x1F;r.f|=0x20;r.f=((r.h&0x04)>0)?0:0x80;r.m=2;}public void BIT2l(){r.f&=0x1F;r.f|=0x20;r.f=((r.l&0x04)>0)?0:0x80;r.m=2;}public void BIT2a(){r.f&=0x1F;r.f|=0x20;r.f=((r.a&0x04)>0)?0:0x80;r.m=2;}public void BIT2m(){r.f&=0x1F;r.f|=0x20;r.f=((g.rb((r.h<<8)+r.l)&0x04)>0)?0:0x80;r.m=3;}public void RES2b(){r.b&=0xFB;r.m=2;}public void RES2c(){r.c&=0xFB;r.m=2;}public void RES2d(){r.d&=0xFB;r.m=2;}public void RES2e(){r.e&=0xFB;r.m=2;}public void RES2h(){r.h&=0xFB;r.m=2;}public void RES2l(){r.l&=0xFB;r.m=2;}public void RES2a(){r.a&=0xFB;r.m=2;}public void RES2m(){int i=g.rb((r.h<<8)+r.l);i&=0xFB;g.wb((r.h<<8)+r.l,(byte)i);r.m=4;}public void SET2b(){r.b|=0x04;r.m=2;}public void SET2c(){r.b|=0x04;r.m=2;}public void SET2d(){r.b|=0x04;r.m=2;}public void SET2e(){r.b|=0x04;r.m=2;}public void SET2h(){r.b|=0x04;r.m=2;}public void SET2l(){r.b|=0x04;r.m=2;}public void SET2a(){r.b|=0x04;r.m=2;}public void SET2m(){int i=g.rb((r.h<<8)+r.l);i|=0x04;g.wb((r.h<<8)+r.l,(byte)i);r.m=4;}public void BIT3b(){r.f&=0x1F;r.f|=0x20;r.f=((r.b&0x08)>0)?0:0x80;r.m=2;}public void BIT3c(){r.f&=0x1F;r.f|=0x20;r.f=((r.c&0x08)>0)?0:0x80;r.m=2;}public void BIT3d(){r.f&=0x1F;r.f|=0x20;r.f=((r.d&0x08)>0)?0:0x80;r.m=2;}public void BIT3e(){r.f&=0x1F;r.f|=0x20;r.f=((r.e&0x08)>0)?0:0x80;r.m=2;}public void BIT3h(){r.f&=0x1F;r.f|=0x20;r.f=((r.h&0x08)>0)?0:0x80;r.m=2;}public void BIT3l(){r.f&=0x1F;r.f|=0x20;r.f=((r.l&0x08)>0)?0:0x80;r.m=2;}public void BIT3a(){r.f&=0x1F;r.f|=0x20;r.f=((r.a&0x08)>0)?0:0x80;r.m=2;}public void BIT3m(){r.f&=0x1F;r.f|=0x20;r.f=((g.rb((r.h<<8)+r.l)&0x08)>0)?0:0x80;r.m=3;}public void RES3b(){r.b&=0xF7;r.m=2;}public void RES3c(){r.c&=0xF7;r.m=2;}public void RES3d(){r.d&=0xF7;r.m=2;}public void RES3e(){r.e&=0xF7;r.m=2;}public void RES3h(){r.h&=0xF7;r.m=2;}public void RES3l(){r.l&=0xF7;r.m=2;}public void RES3a(){r.a&=0xF7;r.m=2;}public void RES3m(){int i=g.rb((r.h<<8)+r.l);i&=0xF7;g.wb((r.h<<8)+r.l,(byte)i);r.m=4;}public void SET3b(){r.b|=0x08;r.m=2;}public void SET3c(){r.b|=0x08;r.m=2;}public void SET3d(){r.b|=0x08;r.m=2;}public void SET3e(){r.b|=0x08;r.m=2;}public void SET3h(){r.b|=0x08;r.m=2;}public void SET3l(){r.b|=0x08;r.m=2;}public void SET3a(){r.b|=0x08;r.m=2;}public void SET3m(){int i=g.rb((r.h<<8)+r.l);i|=0x08;g.wb((r.h<<8)+r.l,(byte)i);r.m=4;}public void BIT4b(){r.f&=0x1F;r.f|=0x20;r.f=((r.b&0x10)>0)?0:0x80;r.m=2;}public void BIT4c(){r.f&=0x1F;r.f|=0x20;r.f=((r.c&0x10)>0)?0:0x80;r.m=2;}public void BIT4d(){r.f&=0x1F;r.f|=0x20;r.f=((r.d&0x10)>0)?0:0x80;r.m=2;}public void BIT4e(){r.f&=0x1F;r.f|=0x20;r.f=((r.e&0x10)>0)?0:0x80;r.m=2;}public void BIT4h(){r.f&=0x1F;r.f|=0x20;r.f=((r.h&0x10)>0)?0:0x80;r.m=2;}public void BIT4l(){r.f&=0x1F;r.f|=0x20;r.f=((r.l&0x10)>0)?0:0x80;r.m=2;}public void BIT4a(){r.f&=0x1F;r.f|=0x20;r.f=((r.a&0x10)>0)?0:0x80;r.m=2;}public void BIT4m(){r.f&=0x1F;r.f|=0x20;r.f=((g.rb((r.h<<8)+r.l)&0x10)>0)?0:0x80;r.m=3;}public void RES4b(){r.b&=0xEF;r.m=2;}public void RES4c(){r.c&=0xEF;r.m=2;}public void RES4d(){r.d&=0xEF;r.m=2;}public void RES4e(){r.e&=0xEF;r.m=2;}public void RES4h(){r.h&=0xEF;r.m=2;}public void RES4l(){r.l&=0xEF;r.m=2;}public void RES4a(){r.a&=0xEF;r.m=2;}public void RES4m(){int i=g.rb((r.h<<8)+r.l);i&=0xEF;g.wb((r.h<<8)+r.l,(byte)i);r.m=4;}public void SET4b(){r.b|=0x10;r.m=2;}public void SET4c(){r.b|=0x10;r.m=2;}public void SET4d(){r.b|=0x10;r.m=2;}public void SET4e(){r.b|=0x10;r.m=2;}public void SET4h(){r.b|=0x10;r.m=2;}public void SET4l(){r.b|=0x10;r.m=2;}public void SET4a(){r.b|=0x10;r.m=2;}public void SET4m(){int i=g.rb((r.h<<8)+r.l);i|=0x10;g.wb((r.h<<8)+r.l,(byte)i);r.m=4;}public void BIT5b(){r.f&=0x1F;r.f|=0x20;r.f=((r.b&0x20)>0)?0:0x80;r.m=2;}public void BIT5c(){r.f&=0x1F;r.f|=0x20;r.f=((r.c&0x20)>0)?0:0x80;r.m=2;}public void BIT5d(){r.f&=0x1F;r.f|=0x20;r.f=((r.d&0x20)>0)?0:0x80;r.m=2;}public void BIT5e(){r.f&=0x1F;r.f|=0x20;r.f=((r.e&0x20)>0)?0:0x80;r.m=2;}public void BIT5h(){r.f&=0x1F;r.f|=0x20;r.f=((r.h&0x20)>0)?0:0x80;r.m=2;}public void BIT5l(){r.f&=0x1F;r.f|=0x20;r.f=((r.l&0x20)>0)?0:0x80;r.m=2;}public void BIT5a(){r.f&=0x1F;r.f|=0x20;r.f=((r.a&0x20)>0)?0:0x80;r.m=2;}public void BIT5m(){r.f&=0x1F;r.f|=0x20;r.f=((g.rb((r.h<<8)+r.l)&0x20)>0)?0:0x80;r.m=3;}public void RES5b(){r.b&=0xDF;r.m=2;}public void RES5c(){r.c&=0xDF;r.m=2;}public void RES5d(){r.d&=0xDF;r.m=2;}public void RES5e(){r.e&=0xDF;r.m=2;}public void RES5h(){r.h&=0xDF;r.m=2;}public void RES5l(){r.l&=0xDF;r.m=2;}public void RES5a(){r.a&=0xDF;r.m=2;}public void RES5m(){int i=g.rb((r.h<<8)+r.l);i&=0xDF;g.wb((r.h<<8)+r.l,(byte)i);r.m=4;}public void SET5b(){r.b|=0x20;r.m=2;}public void SET5c(){r.b|=0x20;r.m=2;}public void SET5d(){r.b|=0x20;r.m=2;}public void SET5e(){r.b|=0x20;r.m=2;}public void SET5h(){r.b|=0x20;r.m=2;}public void SET5l(){r.b|=0x20;r.m=2;}public void SET5a(){r.b|=0x20;r.m=2;}public void SET5m(){int i=g.rb((r.h<<8)+r.l);i|=0x20;g.wb((r.h<<8)+r.l,(byte)i);r.m=4;}public void BIT6b(){r.f&=0x1F;r.f|=0x20;r.f=((r.b&0x40)>0)?0:0x80;r.m=2;}public void BIT6c(){r.f&=0x1F;r.f|=0x20;r.f=((r.c&0x40)>0)?0:0x80;r.m=2;}public void BIT6d(){r.f&=0x1F;r.f|=0x20;r.f=((r.d&0x40)>0)?0:0x80;r.m=2;}public void BIT6e(){r.f&=0x1F;r.f|=0x20;r.f=((r.e&0x40)>0)?0:0x80;r.m=2;}public void BIT6h(){r.f&=0x1F;r.f|=0x20;r.f=((r.h&0x40)>0)?0:0x80;r.m=2;}public void BIT6l(){r.f&=0x1F;r.f|=0x20;r.f=((r.l&0x40)>0)?0:0x80;r.m=2;}public void BIT6a(){r.f&=0x1F;r.f|=0x20;r.f=((r.a&0x40)>0)?0:0x80;r.m=2;}public void BIT6m(){r.f&=0x1F;r.f|=0x20;r.f=((g.rb((r.h<<8)+r.l)&0x40)>0)?0:0x80;r.m=3;}public void RES6b(){r.b&=0xBF;r.m=2;}public void RES6c(){r.c&=0xBF;r.m=2;}public void RES6d(){r.d&=0xBF;r.m=2;}public void RES6e(){r.e&=0xBF;r.m=2;}public void RES6h(){r.h&=0xBF;r.m=2;}public void RES6l(){r.l&=0xBF;r.m=2;}public void RES6a(){r.a&=0xBF;r.m=2;}public void RES6m(){int i=g.rb((r.h<<8)+r.l);i&=0xBF;g.wb((r.h<<8)+r.l,(byte)i);r.m=4;}public void SET6b(){r.b|=0x40;r.m=2;}public void SET6c(){r.b|=0x40;r.m=2;}public void SET6d(){r.b|=0x40;r.m=2;}public void SET6e(){r.b|=0x40;r.m=2;}public void SET6h(){r.b|=0x40;r.m=2;}public void SET6l(){r.b|=0x40;r.m=2;}public void SET6a(){r.b|=0x40;r.m=2;}public void SET6m(){int i=g.rb((r.h<<8)+r.l);i|=0x40;g.wb((r.h<<8)+r.l,(byte)i);r.m=4;}public void BIT7b(){r.f&=0x1F;r.f|=0x20;r.f=((r.b&0x80)>0)?0:0x80;r.m=2;}public void BIT7c(){r.f&=0x1F;r.f|=0x20;r.f=((r.c&0x80)>0)?0:0x80;r.m=2;}public void BIT7d(){r.f&=0x1F;r.f|=0x20;r.f=((r.d&0x80)>0)?0:0x80;r.m=2;}public void BIT7e(){r.f&=0x1F;r.f|=0x20;r.f=((r.e&0x80)>0)?0:0x80;r.m=2;}public void BIT7h(){r.f&=0x1F;r.f|=0x20;r.f=((r.h&0x80)>0)?0:0x80;r.m=2;}public void BIT7l(){r.f&=0x1F;r.f|=0x20;r.f=((r.l&0x80)>0)?0:0x80;r.m=2;}public void BIT7a(){r.f&=0x1F;r.f|=0x20;r.f=((r.a&0x80)>0)?0:0x80;r.m=2;}public void BIT7m(){r.f&=0x1F;r.f|=0x20;r.f=((g.rb((r.h<<8)+r.l)&0x80)>0)?0:0x80;r.m=3;}public void RES7b(){r.b&=0x7F;r.m=2;}public void RES7c(){r.c&=0x7F;r.m=2;}public void RES7d(){r.d&=0x7F;r.m=2;}public void RES7e(){r.e&=0x7F;r.m=2;}public void RES7h(){r.h&=0x7F;r.m=2;}public void RES7l(){r.l&=0x7F;r.m=2;}public void RES7a(){r.a&=0x7F;r.m=2;}public void RES7m(){int i=g.rb((r.h<<8)+r.l);i&=0x7F;g.wb((r.h<<8)+r.l,(byte)i);r.m=4;}public void SET7b(){r.b|=0x80;r.m=2;}public void SET7c(){r.b|=0x80;r.m=2;}public void SET7d(){r.b|=0x80;r.m=2;}public void SET7e(){r.b|=0x80;r.m=2;}public void SET7h(){r.b|=0x80;r.m=2;}public void SET7l(){r.b|=0x80;r.m=2;}public void SET7a(){r.b|=0x80;r.m=2;}public void SET7m(){int i=g.rb((r.h<<8)+r.l);i|=0x80;g.wb((r.h<<8)+r.l,(byte)i);r.m=4;}public void RLA(){var ci=((r.f&0x10)>0)?1:0;var co=((r.a&0x80)>0)?0x10:0;r.a=(r.a<<1)+ci;r.a&=0xFF;r.f=(r.f&0xEF)+co;r.m=1;}public void RLCA(){var ci=((r.a&0x80)>0)?1:0;var co=((r.a&0x80)>0)?0x10:0;r.a=(r.a<<1)+ci;r.a&=0xFF;r.f=(r.f&0xEF)+co;r.m=1;}public void RRA(){var ci=((r.f&0x10)>0)?0x80:0;var co=((r.a&1)>0)?0x10:0;r.a=(r.a>>1)+ci;r.a&=0xFF;r.f=(r.f&0xEF)+co;r.m=1;}public void RRCA(){var ci=((r.a&1)>0)?0x80:0;var co=((r.a&1)>0)?0x10:0;r.a=(r.a>>1)+ci;r.a&=0xFF;r.f=(r.f&0xEF)+co;r.m=1;}public void RLr_b(){var ci=((r.f&0x10)>0)?1:0;var co=((r.b&0x80)>0)?0x10:0;r.b=(r.b<<1)+ci;r.b&=0xFF;r.f=(r.b>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RLr_c(){var ci=((r.f&0x10)>0)?1:0;var co=((r.c&0x80)>0)?0x10:0;r.c=(r.c<<1)+ci;r.c&=0xFF;r.f=(r.c>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RLr_d(){var ci=((r.f&0x10)>0)?1:0;var co=((r.d&0x80)>0)?0x10:0;r.d=(r.d<<1)+ci;r.d&=0xFF;r.f=(r.d>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RLr_e(){var ci=((r.f&0x10)>0)?1:0;var co=((r.e&0x80)>0)?0x10:0;r.e=(r.e<<1)+ci;r.e&=0xFF;r.f=(r.e>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RLr_h(){var ci=((r.f&0x10)>0)?1:0;var co=((r.h&0x80)>0)?0x10:0;r.h=(r.h<<1)+ci;r.h&=0xFF;r.f=(r.h>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RLr_l(){var ci=((r.f&0x10)>0)?1:0;var co=((r.l&0x80)>0)?0x10:0;r.l=(r.l<<1)+ci;r.l&=0xFF;r.f=(r.l>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RLr_a(){var ci=((r.f&0x10)>0)?1:0;var co=((r.a&0x80)>0)?0x10:0;r.a=(r.a<<1)+ci;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RLHL(){int i=g.rb((r.h<<8)+r.l);var ci=((r.f&0x10)>0)?1:0;var co=((i&0x80)>0)?0x10:0;i=(i<<1)+ci;i&=0xFF;r.f=(i>0)?0:0x80;g.wb((r.h<<8)+r.l,(byte)i);r.f=(r.f&0xEF)+co;r.m=4;}public void RLCr_b(){var ci=((r.b&0x80)>0)?1:0;var co=((r.b&0x80)>0)?0x10:0;r.b=(r.b<<1)+ci;r.b&=0xFF;r.f=(r.b>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RLCr_c(){var ci=((r.c&0x80)>0)?1:0;var co=((r.c&0x80)>0)?0x10:0;r.c=(r.c<<1)+ci;r.c&=0xFF;r.f=(r.c>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RLCr_d(){var ci=((r.d&0x80)>0)?1:0;var co=((r.d&0x80)>0)?0x10:0;r.d=(r.d<<1)+ci;r.d&=0xFF;r.f=(r.d>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RLCr_e(){var ci=((r.e&0x80)>0)?1:0;var co=((r.e&0x80)>0)?0x10:0;r.e=(r.e<<1)+ci;r.e&=0xFF;r.f=(r.e>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RLCr_h(){var ci=((r.h&0x80)>0)?1:0;var co=((r.h&0x80)>0)?0x10:0;r.h=(r.h<<1)+ci;r.h&=0xFF;r.f=(r.h>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RLCr_l(){var ci=((r.l&0x80)>0)?1:0;var co=((r.l&0x80)>0)?0x10:0;r.l=(r.l<<1)+ci;r.l&=0xFF;r.f=(r.l>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RLCr_a(){var ci=((r.a&0x80)>0)?1:0;var co=((r.a&0x80)>0)?0x10:0;r.a=(r.a<<1)+ci;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RLCHL(){int i=g.rb((r.h<<8)+r.l);var ci=((i&0x80)>0)?1:0;var co=((i&0x80)>0)?0x10:0;i=(i<<1)+ci;i&=0xFF;r.f=(i>0)?0:0x80;g.wb((r.h<<8)+r.l,(byte)i);r.f=(r.f&0xEF)+co;r.m=4;}public void RRr_b(){var ci=((r.f&0x10)>0)?0x80:0;var co=((r.b&1)>0)?0x10:0;r.b=(r.b>>1)+ci;r.b&=0xFF;r.f=(r.b>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RRr_c(){var ci=((r.f&0x10)>0)?0x80:0;var co=((r.c&1)>0)?0x10:0;r.c=(r.c>>1)+ci;r.c&=0xFF;r.f=(r.c>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RRr_d(){var ci=((r.f&0x10)>0)?0x80:0;var co=((r.d&1)>0)?0x10:0;r.d=(r.d>>1)+ci;r.d&=0xFF;r.f=(r.d>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RRr_e(){var ci=((r.f&0x10)>0)?0x80:0;var co=((r.e&1)>0)?0x10:0;r.e=(r.e>>1)+ci;r.e&=0xFF;r.f=(r.e>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RRr_h(){var ci=((r.f&0x10)>0)?0x80:0;var co=((r.h&1)>0)?0x10:0;r.h=(r.h>>1)+ci;r.h&=0xFF;r.f=(r.h>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RRr_l(){var ci=((r.f&0x10)>0)?0x80:0;var co=((r.l&1)>0)?0x10:0;r.l=(r.l>>1)+ci;r.l&=0xFF;r.f=(r.l>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RRr_a(){var ci=((r.f&0x10)>0)?0x80:0;var co=((r.a&1)>0)?0x10:0;r.a=(r.a>>1)+ci;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RRHL(){int i=g.rb((r.h<<8)+r.l);var ci=((r.f&0x10)>0)?0x80:0;var co=((i&1)>0)?0x10:0;i=(i>>1)+ci;i&=0xFF;g.wb((r.h<<8)+r.l,(byte)i);r.f=(i>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=4;}public void RRCr_b(){var ci=((r.b&1)>0)?0x80:0;var co=((r.b&1)>0)?0x10:0;r.b=(r.b>>1)+ci;r.b&=0xFF;r.f=(r.b>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RRCr_c(){var ci=((r.c&1)>0)?0x80:0;var co=((r.c&1)>0)?0x10:0;r.c=(r.c>>1)+ci;r.c&=0xFF;r.f=(r.c>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RRCr_d(){var ci=((r.d&1)>0)?0x80:0;var co=((r.d&1)>0)?0x10:0;r.d=(r.d>>1)+ci;r.d&=0xFF;r.f=(r.d>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RRCr_e(){var ci=((r.e&1)>0)?0x80:0;var co=((r.e&1)>0)?0x10:0;r.e=(r.e>>1)+ci;r.e&=0xFF;r.f=(r.e>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RRCr_h(){var ci=((r.h&1)>0)?0x80:0;var co=((r.h&1)>0)?0x10:0;r.h=(r.h>>1)+ci;r.h&=0xFF;r.f=(r.h>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RRCr_l(){var ci=((r.l&1)>0)?0x80:0;var co=((r.l&1)>0)?0x10:0;r.l=(r.l>>1)+ci;r.l&=0xFF;r.f=(r.l>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RRCr_a(){var ci=((r.a&1)>0)?0x80:0;var co=((r.a&1)>0)?0x10:0;r.a=(r.a>>1)+ci;r.a&=0xFF;r.f=(r.a>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void RRCHL(){int i=g.rb((r.h<<8)+r.l);var ci=((i&1)>0)?0x80:0;var co=((i&1)>0)?0x10:0;i=(i>>1)+ci;i&=0xFF;g.wb((r.h<<8)+r.l,(byte)i);r.f=(i>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=4;}public void SLAr_b(){var co=((r.b&0x80)>0)?0x10:0;r.b=(r.b<<1)&0xFF;r.f=(r.b>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SLAr_c(){var co=((r.c&0x80)>0)?0x10:0;r.c=(r.c<<1)&0xFF;r.f=(r.c>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SLAr_d(){var co=((r.d&0x80)>0)?0x10:0;r.d=(r.d<<1)&0xFF;r.f=(r.d>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SLAr_e(){var co=((r.e&0x80)>0)?0x10:0;r.e=(r.e<<1)&0xFF;r.f=(r.e>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SLAr_h(){var co=((r.h&0x80)>0)?0x10:0;r.h=(r.h<<1)&0xFF;r.f=(r.h>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SLAr_l(){var co=((r.l&0x80)>0)?0x10:0;r.l=(r.l<<1)&0xFF;r.f=(r.l>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SLAr_a(){var co=((r.a&0x80)>0)?0x10:0;r.a=(r.a<<1)&0xFF;r.f=(r.a>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SLLr_b(){var co=((r.b&0x80)>0)?0x10:0;r.b=(r.b<<1)&0xFF+1;r.f=(r.b>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SLLr_c(){var co=((r.c&0x80)>0)?0x10:0;r.c=(r.c<<1)&0xFF+1;r.f=(r.c>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SLLr_d(){var co=((r.d&0x80)>0)?0x10:0;r.d=(r.d<<1)&0xFF+1;r.f=(r.d>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SLLr_e(){var co=((r.e&0x80)>0)?0x10:0;r.e=(r.e<<1)&0xFF+1;r.f=(r.e>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SLLr_h(){var co=((r.h&0x80)>0)?0x10:0;r.h=(r.h<<1)&0xFF+1;r.f=(r.h>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SLLr_l(){var co=((r.l&0x80)>0)?0x10:0;r.l=(r.l<<1)&0xFF+1;r.f=(r.l>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SLLr_a(){var co=((r.a&0x80)>0)?0x10:0;r.a=(r.a<<1)&0xFF+1;r.f=(r.a>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SRAr_b(){var ci=r.b&0x80;var co=((r.b&1)>0)?0x10:0;r.b=((r.b>>1)+ci)&0xFF;r.f=(r.b>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SRAr_c(){var ci=r.c&0x80;var co=((r.c&1)>0)?0x10:0;r.c=((r.c>>1)+ci)&0xFF;r.f=(r.c>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SRAr_d(){var ci=r.d&0x80;var co=((r.d&1)>0)?0x10:0;r.d=((r.d>>1)+ci)&0xFF;r.f=(r.d>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SRAr_e(){var ci=r.e&0x80;var co=((r.e&1)>0)?0x10:0;r.e=((r.e>>1)+ci)&0xFF;r.f=(r.e>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SRAr_h(){var ci=r.h&0x80;var co=((r.h&1)>0)?0x10:0;r.h=((r.h>>1)+ci)&0xFF;r.f=(r.h>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SRAr_l(){var ci=r.l&0x80;var co=((r.l&1)>0)?0x10:0;r.l=((r.l>>1)+ci)&0xFF;r.f=(r.l>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SRAr_a(){var ci=r.a&0x80;var co=((r.a&1)>0)?0x10:0;r.a=((r.a>>1)+ci)&0xFF;r.f=(r.a>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SRLr_b(){var co=((r.b&1)>0)?0x10:0;r.b=(r.b>>1)&0xFF;r.f=(r.b>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SRLr_c(){var co=((r.c&1)>0)?0x10:0;r.c=(r.c>>1)&0xFF;r.f=(r.c>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SRLr_d(){var co=((r.d&1)>0)?0x10:0;r.d=(r.d>>1)&0xFF;r.f=(r.d>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SRLr_e(){var co=((r.e&1)>0)?0x10:0;r.e=(r.e>>1)&0xFF;r.f=(r.e>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SRLr_h(){var co=((r.h&1)>0)?0x10:0;r.h=(r.h>>1)&0xFF;r.f=(r.h>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SRLr_l(){var co=((r.l&1)>0)?0x10:0;r.l=(r.l>>1)&0xFF;r.f=(r.l>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void SRLr_a(){var co=((r.a&1)>0)?0x10:0;r.a=(r.a>>1)&0xFF;r.f=(r.a>0)?0:0x80;r.f=(r.f&0xEF)+co;r.m=2;}public void CPL(){r.a^=0xFF;r.f=(r.a>0)?0:0x80;r.m=1;}public void NEG(){r.a=0-r.a;r.f=(r.a<0)?0x10:0;r.a&=0xFF;if(!(r.a>0))r.f|=0x80;r.m=2;}public void CCF(){var ci=((r.f&0x10)>0)?0:0x10;r.f=(r.f&0xEF)+ci;r.m=1;}public void SCF(){r.f|=0x10;r.m=1;}public void PUSHBC(){r.sp--;g.wb(r.sp,(byte)r.b);r.sp--;g.wb(r.sp,(byte)r.c);r.m=3;}public void PUSHDE(){r.sp--;g.wb(r.sp,(byte)r.d);r.sp--;g.wb(r.sp,(byte)r.e);r.m=3;}public void PUSHHL(){r.sp--;g.wb(r.sp,(byte)r.h);r.sp--;g.wb(r.sp,(byte)r.l);r.m=3;}public void PUSHAF(){r.sp--;g.wb(r.sp,(byte)r.a);r.sp--;g.wb(r.sp,(byte)r.f);r.m=3;}public void POPBC(){r.c=g.rb(r.sp);r.sp++;r.b=g.rb(r.sp);r.sp++;r.m=3;}public void POPDE(){r.e=g.rb(r.sp);r.sp++;r.d=g.rb(r.sp);r.sp++;r.m=3;}public void POPHL(){r.l=g.rb(r.sp);r.sp++;r.h=g.rb(r.sp);r.sp++;r.m=3;}public void POPAF(){r.f=g.rb(r.sp);r.sp++;r.a=g.rb(r.sp);r.sp++;r.m=3;}public void JPnn(){r.pc=g.rw(r.pc);r.m=3;}public void JPHL(){r.pc=(r.h<<8)+r.l;r.m=1;}public void JPNZnn(){r.m=3;if((r.f&0x80)==0x00){r.pc=g.rw(r.pc);r.m++;}else r.pc+=2;}public void JPZnn(){r.m=3;if((r.f&0x80)==0x80){r.pc=g.rw(r.pc);r.m++;}else r.pc+=2;}public void JPNCnn(){r.m=3;if((r.f&0x10)==0x00){r.pc=g.rw(r.pc);r.m++;}else r.pc+=2;}public void JPCnn(){r.m=3;if((r.f&0x10)==0x10){r.pc=g.rw(r.pc);r.m++;}else r.pc+=2;}public void JRn(){int i=g.rb(r.pc);if(i>127)i=-((~i+1)&0xFF);r.pc++;r.m=2;r.pc+=i;r.m++;}public void JRNZn(){int i=g.rb(r.pc);if(i>127)i=-((~i+1)&0xFF);r.pc++;r.m=2;if((r.f&0x80)==0x00){r.pc+=i;r.m++;}}public void JRZn(){int i=g.rb(r.pc);if(i>127)i=-((~i+1)&0xFF);r.pc++;r.m=2;if((r.f&0x80)==0x80){r.pc+=i;r.m++;}}public void JRNCn(){int i=g.rb(r.pc);if(i>127)i=-((~i+1)&0xFF);r.pc++;r.m=2;if((r.f&0x10)==0x00){r.pc+=i;r.m++;}}public void JRCn(){int i=g.rb(r.pc);if(i>127)i=-((~i+1)&0xFF);r.pc++;r.m=2;if((r.f&0x10)==0x10){r.pc+=i;r.m++;}}public void DJNZn(){int i=g.rb(r.pc);if(i>127)i=-((~i+1)&0xFF);r.pc++;r.m=2;r.b--;if(r.b>0){r.pc+=i;r.m++;}}public void CALLnn(){r.sp-=2;g.ww(r.sp,r.pc+2);r.pc=g.rw(r.pc);r.m=5;}public void CALLNZnn(){r.m=3;if((r.f&0x80)==0x00){r.sp-=2;g.ww(r.sp,r.pc+2);r.pc=g.rw(r.pc);r.m+=2;}else r.pc+=2;}public void CALLZnn(){r.m=3;if((r.f&0x80)==0x80){r.sp-=2;g.ww(r.sp,r.pc+2);r.pc=g.rw(r.pc);r.m+=2;}else r.pc+=2;}public void CALLNCnn(){r.m=3;if((r.f&0x10)==0x00){r.sp-=2;g.ww(r.sp,r.pc+2);r.pc=g.rw(r.pc);r.m+=2;}else r.pc+=2;}public void CALLCnn(){r.m=3;if((r.f&0x10)==0x10){r.sp-=2;g.ww(r.sp,r.pc+2);r.pc=g.rw(r.pc);r.m+=2;}else r.pc+=2;}public void RET(){r.pc=g.rw(r.sp);r.sp+=2;r.m=3;}public void RETI(){r.ime=1;rrs();r.pc=g.rw(r.sp);r.sp+=2;r.m=3;}public void RETNZ(){r.m=1;if((r.f&0x80)==0x00){r.pc=g.rw(r.sp);r.sp+=2;r.m+=2;}}public void RETZ(){r.m=1;if((r.f&0x80)==0x80){r.pc=g.rw(r.sp);r.sp+=2;r.m+=2;}}public void RETNC(){r.m=1;if((r.f&0x10)==0x00){r.pc=g.rw(r.sp);r.sp+=2;r.m+=2;}}public void RETC(){r.m=1;if((r.f&0x10)==0x10){r.pc=g.rw(r.sp);r.sp+=2;r.m+=2;}}public void RST00(){rsv();r.sp-=2;g.ww(r.sp,r.pc);r.pc=0x00;r.m=3;}public void RST08(){rsv();r.sp-=2;g.ww(r.sp,r.pc);r.pc=0x08;r.m=3;}public void RST10(){rsv();r.sp-=2;g.ww(r.sp,r.pc);r.pc=0x10;r.m=3;}public void RST18(){rsv();r.sp-=2;g.ww(r.sp,r.pc);r.pc=0x18;r.m=3;}public void RST20(){rsv();r.sp-=2;g.ww(r.sp,r.pc);r.pc=0x20;r.m=3;}public void RST28(){rsv();r.sp-=2;g.ww(r.sp,r.pc);r.pc=0x28;r.m=3;}public void RST30(){rsv();r.sp-=2;g.ww(r.sp,r.pc);r.pc=0x30;r.m=3;}public void RST38(){rsv();r.sp-=2;g.ww(r.sp,r.pc);r.pc=0x38;r.m=3;}public void RST40(){rsv();r.sp-=2;g.ww(r.sp,r.pc);r.pc=0x40;r.m=3;}public void RST48(){rsv();r.sp-=2;g.ww(r.sp,r.pc);r.pc=0x48;r.m=3;}public void RST50(){rsv();r.sp-=2;g.ww(r.sp,r.pc);r.pc=0x50;r.m=3;}public void RST58(){rsv();r.sp-=2;g.ww(r.sp,r.pc);r.pc=0x58;r.m=3;}public void RST60(){rsv();r.sp-=2;g.ww(r.sp,r.pc);r.pc=0x60;r.m=3;}public void NOP(){r.m=1;}public void HALT(){_halt=1;r.m=1;}public void DI(){r.ime=0;r.m=1;}public void EI(){r.ime=1;r.m=1;}public void rsv(){rv.a=r.a;rv.b=r.b;rv.c=r.c;rv.d=r.d;rv.e=r.e;rv.f=r.f;rv.h=r.h;rv.l=r.l;}public void rrs(){r.a=rv.a;r.b=rv.b;r.c=rv.c;r.d=rv.d;r.e=rv.e;r.f=rv.f;r.h=rv.h;r.l=rv.l;}public void MAPcb(){int i=g.rb(r.pc);r.pc++;r.pc&=65535;if(_cbmap[i]!=null)_cbmap[i]();}public void XX(){var opc=r.pc-1;_stop=1;}}
